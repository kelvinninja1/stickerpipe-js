document.addEventListener("DOMContentLoaded",function(event){"undefined"==typeof window.ga&&!function(i,s,o,g,r,a,m){i.GoogleAnalyticsObject=r,i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date,a=s.createElement(o),m=s.getElementsByTagName(o)[0],a.async=1,a.src=g,m.parentNode.insertBefore(a,m)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-1113296-81","auto",{name:"stickerTracker"}),ga("stickerTracker.send","pageview")}),function(Plugin){Plugin.StickersModule=Plugin.StickersModule||{},Plugin.StickersModule.Config={tabContainerId:"sttab",tabItemClass:"sttab_item",stickersContainerId:"stitems",stickerItemClass:"stitems_item",domain:"http://api.stickerpipe.com",baseFolder:"stk",stickerResolutionType:"mdpi",tabResolutionType:"xxhdpi",htmlForEmptyRecent:'<div class="emptyRecent">Ваши Стикеры</div>',apikey:"72921666b5ff8651f374747bfefaf7b2",clientPacksUrl:"http://api.stickerpipe.com/api/v1/client-packs",userPacksUrl:"http://api.stickerpipe.com/api/v1/user/packs",trackStatUrl:"http://api.stickerpipe.com/api/v1/track-statistic",storagePrefix:"stickerPipe",enableCustomTab:!1,userId:null}}(window),function(Plugin,Config){Plugin.StickersModule=Plugin.StickersModule||{},Plugin.StickersModule.Lockr={};var Lockr=Plugin.StickersModule.Lockr;Lockr.prefix=Config.storagePrefix,Lockr._getPrefixedKey=function(key,options){return options=options||{},options.noPrefix?key:this.prefix+key},Lockr.set=function(key,value,options){var query_key=this._getPrefixedKey(key,options);try{localStorage.setItem(query_key,JSON.stringify({data:value}))}catch(e){console&&console.warn("Lockr didn't successfully save the '{"+key+": "+value+"}' pair, because the localStorage is full.")}},Lockr.get=function(key,missing,options){var value,query_key=this._getPrefixedKey(key,options);try{value=JSON.parse(localStorage.getItem(query_key))}catch(e){value=null}return null===value?missing:value.data||missing},Lockr.sadd=function(key,value,options){var json,query_key=this._getPrefixedKey(key,options),values=Lockr.smembers(key);if(values.indexOf(value)>-1)return null;try{values.push(value),json=JSON.stringify({data:values}),localStorage.setItem(query_key,json)}catch(e){console.log(e),console&&console.warn("Lockr didn't successfully add the "+value+" to "+key+" set, because the localStorage is full.")}},Lockr.smembers=function(key,options){var value,query_key=this._getPrefixedKey(key,options);try{value=JSON.parse(localStorage.getItem(query_key))}catch(e){value=null}return null===value?[]:value.data||[]},Lockr.sismember=function(key,value,options){this._getPrefixedKey(key,options);return Lockr.smembers(key).indexOf(value)>-1},Lockr.getAll=function(){var keys=Object.keys(localStorage);return keys.map(function(key){return Lockr.get(key)})},Lockr.srem=function(key,value,options){var json,index,query_key=this._getPrefixedKey(key,options),values=Lockr.smembers(key,value);index=values.indexOf(value),index>-1&&values.splice(index,1),json=JSON.stringify({data:values});try{localStorage.setItem(query_key,json)}catch(e){console&&console.warn("Lockr couldn't remove the "+value+" from the set "+key)}},Lockr.rm=function(key){localStorage.removeItem(key)},Lockr.flush=function(){localStorage.clear()}}(window,window.StickersModule.Config),function(Plugin){Plugin.StickersModule=Plugin.StickersModule||{},Plugin.StickersModule.MD5=function(string){function RotateLeft(lValue,iShiftBits){return lValue<<iShiftBits|lValue>>>32-iShiftBits}function AddUnsigned(lX,lY){var lX4,lY4,lX8,lY8,lResult;return lX8=2147483648&lX,lY8=2147483648&lY,lX4=1073741824&lX,lY4=1073741824&lY,lResult=(1073741823&lX)+(1073741823&lY),lX4&lY4?2147483648^lResult^lX8^lY8:lX4|lY4?1073741824&lResult?3221225472^lResult^lX8^lY8:1073741824^lResult^lX8^lY8:lResult^lX8^lY8}function F(x,y,z){return x&y|~x&z}function G(x,y,z){return x&z|y&~z}function H(x,y,z){return x^y^z}function I(x,y,z){return y^(x|~z)}function FF(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(F(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)}function GG(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(G(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)}function HH(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(H(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)}function II(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(I(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)}function ConvertToWordArray(string){for(var lWordCount,lMessageLength=string.length,lNumberOfWords_temp1=lMessageLength+8,lNumberOfWords_temp2=(lNumberOfWords_temp1-lNumberOfWords_temp1%64)/64,lNumberOfWords=16*(lNumberOfWords_temp2+1),lWordArray=Array(lNumberOfWords-1),lBytePosition=0,lByteCount=0;lMessageLength>lByteCount;)lWordCount=(lByteCount-lByteCount%4)/4,lBytePosition=lByteCount%4*8,lWordArray[lWordCount]=lWordArray[lWordCount]|string.charCodeAt(lByteCount)<<lBytePosition,lByteCount++;return lWordCount=(lByteCount-lByteCount%4)/4,lBytePosition=lByteCount%4*8,lWordArray[lWordCount]=lWordArray[lWordCount]|128<<lBytePosition,lWordArray[lNumberOfWords-2]=lMessageLength<<3,lWordArray[lNumberOfWords-1]=lMessageLength>>>29,lWordArray}function WordToHex(lValue){var lByte,lCount,WordToHexValue="",WordToHexValue_temp="";for(lCount=0;3>=lCount;lCount++)lByte=lValue>>>8*lCount&255,WordToHexValue_temp="0"+lByte.toString(16),WordToHexValue+=WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);return WordToHexValue}function Utf8Encode(string){string=string.replace(/\r\n/g,"\n");for(var utftext="",n=0;n<string.length;n++){var c=string.charCodeAt(n);128>c?utftext+=String.fromCharCode(c):c>127&&2048>c?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(63&c|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(63&c|128))}return utftext}string=string.toString();var k,AA,BB,CC,DD,a,b,c,d,x=Array(),S11=7,S12=12,S13=17,S14=22,S21=5,S22=9,S23=14,S24=20,S31=4,S32=11,S33=16,S34=23,S41=6,S42=10,S43=15,S44=21;for(string=Utf8Encode(string),x=ConvertToWordArray(string),a=1732584193,b=4023233417,c=2562383102,d=271733878,k=0;k<x.length;k+=16)AA=a,BB=b,CC=c,DD=d,a=FF(a,b,c,d,x[k+0],S11,3614090360),d=FF(d,a,b,c,x[k+1],S12,3905402710),c=FF(c,d,a,b,x[k+2],S13,606105819),b=FF(b,c,d,a,x[k+3],S14,3250441966),a=FF(a,b,c,d,x[k+4],S11,4118548399),d=FF(d,a,b,c,x[k+5],S12,1200080426),c=FF(c,d,a,b,x[k+6],S13,2821735955),b=FF(b,c,d,a,x[k+7],S14,4249261313),a=FF(a,b,c,d,x[k+8],S11,1770035416),d=FF(d,a,b,c,x[k+9],S12,2336552879),c=FF(c,d,a,b,x[k+10],S13,4294925233),b=FF(b,c,d,a,x[k+11],S14,2304563134),a=FF(a,b,c,d,x[k+12],S11,1804603682),d=FF(d,a,b,c,x[k+13],S12,4254626195),c=FF(c,d,a,b,x[k+14],S13,2792965006),b=FF(b,c,d,a,x[k+15],S14,1236535329),a=GG(a,b,c,d,x[k+1],S21,4129170786),d=GG(d,a,b,c,x[k+6],S22,3225465664),c=GG(c,d,a,b,x[k+11],S23,643717713),b=GG(b,c,d,a,x[k+0],S24,3921069994),a=GG(a,b,c,d,x[k+5],S21,3593408605),d=GG(d,a,b,c,x[k+10],S22,38016083),c=GG(c,d,a,b,x[k+15],S23,3634488961),b=GG(b,c,d,a,x[k+4],S24,3889429448),a=GG(a,b,c,d,x[k+9],S21,568446438),d=GG(d,a,b,c,x[k+14],S22,3275163606),c=GG(c,d,a,b,x[k+3],S23,4107603335),b=GG(b,c,d,a,x[k+8],S24,1163531501),a=GG(a,b,c,d,x[k+13],S21,2850285829),d=GG(d,a,b,c,x[k+2],S22,4243563512),c=GG(c,d,a,b,x[k+7],S23,1735328473),b=GG(b,c,d,a,x[k+12],S24,2368359562),a=HH(a,b,c,d,x[k+5],S31,4294588738),d=HH(d,a,b,c,x[k+8],S32,2272392833),c=HH(c,d,a,b,x[k+11],S33,1839030562),b=HH(b,c,d,a,x[k+14],S34,4259657740),a=HH(a,b,c,d,x[k+1],S31,2763975236),d=HH(d,a,b,c,x[k+4],S32,1272893353),c=HH(c,d,a,b,x[k+7],S33,4139469664),b=HH(b,c,d,a,x[k+10],S34,3200236656),a=HH(a,b,c,d,x[k+13],S31,681279174),d=HH(d,a,b,c,x[k+0],S32,3936430074),c=HH(c,d,a,b,x[k+3],S33,3572445317),b=HH(b,c,d,a,x[k+6],S34,76029189),a=HH(a,b,c,d,x[k+9],S31,3654602809),d=HH(d,a,b,c,x[k+12],S32,3873151461),c=HH(c,d,a,b,x[k+15],S33,530742520),b=HH(b,c,d,a,x[k+2],S34,3299628645),a=II(a,b,c,d,x[k+0],S41,4096336452),d=II(d,a,b,c,x[k+7],S42,1126891415),c=II(c,d,a,b,x[k+14],S43,2878612391),b=II(b,c,d,a,x[k+5],S44,4237533241),a=II(a,b,c,d,x[k+12],S41,1700485571),d=II(d,a,b,c,x[k+3],S42,2399980690),c=II(c,d,a,b,x[k+10],S43,4293915773),b=II(b,c,d,a,x[k+1],S44,2240044497),a=II(a,b,c,d,x[k+8],S41,1873313359),d=II(d,a,b,c,x[k+15],S42,4264355552),c=II(c,d,a,b,x[k+6],S43,2734768916),b=II(b,c,d,a,x[k+13],S44,1309151649),a=II(a,b,c,d,x[k+4],S41,4149444226),d=II(d,a,b,c,x[k+11],S42,3174756917),c=II(c,d,a,b,x[k+2],S43,718787259),b=II(b,c,d,a,x[k+9],S44,3951481745),a=AddUnsigned(a,AA),b=AddUnsigned(b,BB),c=AddUnsigned(c,CC),d=AddUnsigned(d,DD);var temp=WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);return temp.toLowerCase()}}(window),function(Plugin,Lockr,MD5){Plugin.StickersModule=Plugin.StickersModule||{},Plugin.StickersModule.StickerHelper={forEach:function(data,callback){for(var x in data)callback(data[x],x)},mergeOptions:function(obj1,obj2){var obj3={};for(var attrname in obj1)obj3[attrname]=obj1[attrname];for(var attrname in obj2)obj3[attrname]=obj2[attrname];return obj3},setEvent:function(eventType,id,className,callback){document.getElementById(id).addEventListener(eventType,function(event){for(var found,el=event.target;el&&!(found=el.className.match(className));)el=el.parentElement;found&&callback(el,event)})},ajaxGet:function(url,apikey,callback,header){header=header||{};var xmlhttp;xmlhttp=new XMLHttpRequest,xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&callback(JSON.parse(xmlhttp.responseText))},xmlhttp.open("GET",url,!0),xmlhttp.setRequestHeader("Apikey",apikey),xmlhttp.setRequestHeader("Platform","JS"),this.forEach(header,function(value,name){xmlhttp.setRequestHeader(name,value)}),xmlhttp.send()},ajaxPost:function(url,apikey,data,callback){var xmlhttp,uniqUserId=Lockr.get("uniqUserId");xmlhttp=new XMLHttpRequest,xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status,"undefined"!=typeof callback&&callback(JSON.parse(xmlhttp.responseText))},"undefined"==typeof uniqUserId&&(uniqUserId=+new Date,Lockr.set("uniqUserId",uniqUserId)),xmlhttp.open("POST",url,!0),xmlhttp.setRequestHeader("Apikey",apikey),xmlhttp.setRequestHeader("Platform","JS"),xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xmlhttp.setRequestHeader("DeviceId",uniqUserId),xmlhttp.send(JSON.stringify(data))},md5:function(string){return MD5(string)}}}(window,window.StickersModule.Lockr,window.StickersModule.MD5),function(Plugin,StickerHelper){function BaseController(){this.handleClickTab=function(itemsBlockId,itemsClassName,callback){StickerHelper.setEvent("click",itemsBlockId,itemsClassName,callback)},this.handleClickSticker=function(itemsBlockId,itemsClassName,callback){StickerHelper.setEvent("click",itemsBlockId,itemsClassName,callback)}}Plugin.StickersModule=Plugin.StickersModule||{},Plugin.StickersModule.BaseController=BaseController}(window,window.StickersModule.StickerHelper),function(Plugin,StickerHelper,Lockr){function BaseService(Config){var parseCountStat=0,parseCountWithStickerStat=0,parseStickerStatHandle=function(is_have){var nowDate=(new Date).getTime()/1e3|0;parseCountStat++,is_have&&parseCountWithStickerStat++,parseCountStat>=50&&(StickerHelper.ajaxPost(Config.trackStatUrl,Config.apikey,[{action:"check",category:"message",label:"Events count",time:nowDate,value:parseCountStat},{action:"check",category:"message",label:"Stickers count",time:nowDate,value:parseCountWithStickerStat}]),ga("stickerTracker.send","event","message","check","Events count",parseCountStat),ga("stickerTracker.send","event","message","check","Stickers count",parseCountWithStickerStat),parseCountWithStickerStat=0,parseCountStat=0)};this.addToLatestUse=function(code){var storageDate=Lockr.get("sticker_latest_use")||[],newStorageDate=[];StickerHelper.forEach(storageDate,function(codeFromStorage){codeFromStorage.code!=code&&newStorageDate.push(codeFromStorage)}),storageDate=newStorageDate,storageDate.unshift({code:code}),Lockr.set("sticker_latest_use",storageDate)},this.getNewStickersFlag=function(packs){return Lockr.get("sticker_have_new")},this.resetNewStickersFlag=function(packs){return Lockr.set("sticker_have_new",!1)},this.getLatestUse=function(){return Lockr.get("sticker_latest_use")||[]},this.getPacksFromStorage=function(){var expireDate=+new Date,packsObj=Lockr.get("sticker_packs");return"undefined"==typeof packsObj||packsObj.expireDate<expireDate?{actual:!1,packs:"object"==typeof packsObj&&packsObj.packs?packsObj.packs:[]}:{actual:!0,packs:packsObj.packs}},this.markNewPacks=function(oldPacks,newPacks){var globalNew=!1;return 0!=oldPacks.length&&(StickerHelper.forEach(newPacks,function(newPack,key){var isNewPack=!0;StickerHelper.forEach(oldPacks,function(oldPack){newPack.pack_name==oldPack.pack_name&&(isNewPack=oldPack.newPack)}),isNewPack&&(globalNew=!0),newPacks[key].newPack=isNewPack}),globalNew&&Lockr.set("sticker_have_new",globalNew)),newPacks},this.setPacksToStorage=function(packsObj){var expireDate=new Date,saveObj={packs:packsObj,expireDate:expireDate.setDate(expireDate.getDate()+1)};return Lockr.set("sticker_packs",saveObj)},this.getPacksFromServer=function(callback){var options={url:Config.clientPacksUrl,header:[]};null!==Config.userId&&(options.url=Config.userPacksUrl,options.header.UserId=StickerHelper.md5(Config.userId+Config.apikey)),StickerHelper.ajaxGet(options.url,Config.apikey,callback,options.header)},this.parseStickerFromText=function(text){var outData={isSticker:!1,url:""},matchData=text.match(/\[\[(\S+)_(\S+)\]\]/);return parseStickerStatHandle(!!matchData),matchData&&(outData.isSticker=!0,outData.url=Config.domain+"/"+Config.baseFolder+"/"+matchData[1]+"/"+matchData[2]+"_"+Config.stickerResolutionType+".png",outData.pack=matchData[1],outData.name=matchData[2]),outData},this.isNewPack=function(packs,packName){var isNew=!1;return StickerHelper.forEach(packs,function(pack){pack.pack_name&&pack.pack_name.toLowerCase()==packName.toLowerCase()&&(isNew=!!pack.newPack)}),isNew},this.onUserMessageSent=function(isSticker){var nowDate=(new Date).getTime()/1e3|0,action="send",category="message",label=isSticker?"sticker":"text";StickerHelper.ajaxPost(Config.trackStatUrl,Config.apikey,[{action:action,category:category,label:label,time:nowDate}]),ga("stickerTracker.send","event",category,action,label)}}Plugin.StickersModule=Plugin.StickersModule||{},Plugin.StickersModule.BaseService=BaseService}(window,StickersModule.StickerHelper,StickersModule.Lockr),function(Plugin,StickerHelper,BaseService){function BaseView(Config){var clearBlock=function(idBlock){var conteinerEl=document.getElementById(idBlock);conteinerEl.setAttribute("style","display:block"),conteinerEl.innerHTML=""};this.hideBlock=function(idBlock){var conteinerEl=document.getElementById(idBlock);conteinerEl.setAttribute("style","display:none")},this.renderTabs=function(stickerPacks,tabActive,tabContainerId,tabItemClass){var conteinerEl=document.getElementById(tabContainerId),iteratorTabs=0,newTabClass="",tabActiveClass="";clearBlock(tabContainerId),Config.enableCustomTab&&(tabActiveClass=-2==tabActive?" active":"",conteinerEl.innerHTML+='<span id = "custom_tab" class= "'+tabItemClass+tabActiveClass+'" data-tab-number = "-2" ></span>'),tabActiveClass=-1==tabActive?" active":"",conteinerEl.innerHTML+='<span id = "recents_tab" class= "'+tabItemClass+tabActiveClass+'" data-tab-number = "-1" ></span>',StickerHelper.forEach(stickerPacks,function(pack){var icon_src,packItem,tabActiveClass=newTabClass="";tabActive===iteratorTabs&&(tabActiveClass=" active"),pack.newPack&&(newTabClass=" stnewtab"),icon_src=Config.domain+"/"+Config.baseFolder+"/"+pack.pack_name+"/tab_icon_"+Config.tabResolutionType+".png",packItem='<span class= "'+tabItemClass+newTabClass+tabActiveClass+'" data-tab-number = '+iteratorTabs+" > <img src="+icon_src+"></span>",conteinerEl.innerHTML+=packItem,iteratorTabs++})},this.renderUseStickers=function(latesUseSticker,stickerContainerId,stickerItemClass){var conteinerEl=document.getElementById(stickerContainerId),base_service=new BaseService(Config);return clearBlock(stickerContainerId),0==latesUseSticker.length?(conteinerEl.innerHTML+=Config.htmlForEmptyRecent,!1):void StickerHelper.forEach(latesUseSticker,function(sticker){var packItem,icon_src=base_service.parseStickerFromText("[["+sticker.code+"]]");packItem="<span data-sticker-string="+sticker.code+" class="+stickerItemClass+"> <img src="+icon_src.url+"></span>",conteinerEl.innerHTML+=packItem})},this.renderStickers=function(stickerPacks,tabActive,stickerContainerId,stickerItemClass){var conteinerEl=document.getElementById(stickerContainerId),tabNumber=0;clearBlock(stickerContainerId),StickerHelper.forEach(stickerPacks,function(pack){tabNumber==tabActive&&StickerHelper.forEach(pack.stickers,function(sticker){var icon_src=Config.domain+"/"+Config.baseFolder+"/"+pack.pack_name+"/"+sticker.name+"_"+Config.stickerResolutionType+".png",packItem="<span data-sticker-string="+pack.pack_name+"_"+sticker.name+" class="+stickerItemClass+"> <img src="+icon_src+"></span>";conteinerEl.innerHTML+=packItem}),tabNumber++})}}Plugin.StickersModule.BaseView=BaseView}(window,StickersModule.StickerHelper,StickersModule.BaseService),function(Plugin,_module){function Stickers(configObj){var Config=_module.StickerHelper.mergeOptions(_module.Config,configObj);stService=new _module.BaseService(Config),stView=new _module.BaseView(Config),stController=new _module.BaseController(Config),configObj=configObj||{},stickersModel={},tabActive=0;var _renderAll=function(){stView.renderTabs(stickersModel,tabActive,Config.tabContainerId,Config.tabItemClass),-1==tabActive?stView.renderUseStickers(stService.getLatestUse(),Config.stickersContainerId,Config.stickerItemClass):-2==tabActive?stView.hideBlock(Config.stickersContainerId):stView.renderStickers(stickersModel,tabActive,Config.stickersContainerId,Config.stickerItemClass)},_init=function(){_renderAll(),stController.handleClickTab(Config.tabContainerId,Config.tabItemClass,function(el){tabActive=+el.getAttribute("data-tab-number"),tabActive>=0&&(stickersModel[tabActive].newPack=!1),stService.setPacksToStorage(stickersModel),_renderAll()}),stController.handleClickSticker(Config.stickersContainerId,Config.stickerItemClass,function(el){var stickerAttribute=el.getAttribute("data-sticker-string"),nowDate=(new Date).getTime()/1e3|0;_module.StickerHelper.ajaxPost(Config.trackStatUrl,Config.apikey,[{action:"use",category:"sticker",label:"[["+stickerAttribute+"]]",time:nowDate}]),ga("stickerTracker.send","event","sticker",stickerAttribute.split("_")[0],stickerAttribute.split("_")[1],1),stService.addToLatestUse(stickerAttribute),_renderAll()})};this.fetchPacks=function(attrs){var storageStickerData;storageStickerData=stService.getPacksFromStorage(),stService.getPacksFromServer(function(response){if("success"==response.status){var stickerPacks=response.data;stickerPacks=stService.markNewPacks(storageStickerData.packs,stickerPacks),stService.setPacksToStorage(stickerPacks),stickersModel=stickerPacks,attrs.onlyFetch||_init(),attrs.callback&&attrs.callback.apply()}})},this.start=function(callback){var storageStickerData;tabActive=-1,storageStickerData=stService.getPacksFromStorage(),storageStickerData.actual?(stickersModel=storageStickerData.packs,_init(),callback&&callback.apply()):this.fetchPacks({callback:callback})},this.onClickSticker=function(callback,context){stController.handleClickSticker(Config.stickersContainerId,Config.stickerItemClass,function(el){callback.call(context,"[["+el.getAttribute("data-sticker-string")+"]]")})},this.onClickCustomTab=function(callback,context){stController.handleClickTab(Config.tabContainerId,Config.tabItemClass,function(el){"custom_tab"==el.getAttribute("id")&&callback.call(context,el)})},this.onClickTab=function(callback,context){stController.handleClickTab(Config.tabContainerId,Config.tabItemClass,function(el){callback.call(context,el)})},this.getNewStickersFlag=function(){return stService.getNewStickersFlag(stService.getPacksFromStorage().packs||[])},this.resetNewStickersFlag=function(){return stService.resetNewStickersFlag()},this.parseStickerFromText=function(text){return stService.parseStickerFromText(text)},this.renderCurrentTab=function(tabName){var obj=stService.getPacksFromStorage();this.start(),_module.StickerHelper.forEach(obj.packs,function(pack,key){pack.pack_name.toLowerCase()==tabName.toLowerCase()&&(tabActive=+key)}),_renderAll()},this.isNewPack=function(packName){return stService.isNewPack(stickersModel,packName)},this.onUserMessageSent=function(isSticker){return stService.onUserMessageSent(isSticker)}}Plugin.Stickers=Stickers}(window,StickersModule);