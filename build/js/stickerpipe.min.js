window.StickersModule={},document.addEventListener("DOMContentLoaded",function(event){"undefined"==typeof window.ga&&!function(i,s,o,g,r,a,m){i.GoogleAnalyticsObject=r,i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date,a=s.createElement(o),m=s.getElementsByTagName(o)[0],a.async=1,a.src=g,m.parentNode.insertBefore(a,m)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-1113296-81","auto",{name:"stickerTracker"}),ga("stickerTracker.send","pageview")}),function(Plugin){function inherit(dest,src,noParent){for(;src&&src!==Object.prototype&&(Object.getOwnPropertyNames(src).forEach(function(name){if(".class"!=name&&!dest.hasOwnProperty(name)){var desc=Object.getOwnPropertyDescriptor(src,name);Object.defineProperty(dest,name,desc)}}),!noParent);)src=src.__proto__;return dest}function findType(meta,type){for(;meta;){if(meta.type.prototype===type.prototype)return!0;for(var i in meta["implements"]){var implType=meta["implements"][i],implMeta=implType[".class.meta"];if(implMeta){if(findType(implMeta,type))return!0}else for(var proto=implType.prototype;proto;proto=proto.__proto__)if(proto===type.prototype)return!0}meta=meta.base?meta.base[".class.meta"]:void 0}return!1}Plugin.StickersModule=Plugin.StickersModule||{};var Class=function(base,proto,options){"function"!=typeof base&&(options=proto,proto=base,base=Object),proto||(proto={}),options||(options={});var meta={name:options.name,base:base,"implements":[]},classProto=Class.clone(proto);options["implements"]&&(Array.isArray(options["implements"])?options["implements"]:[options["implements"]]).forEach(function(implementedType){"function"==typeof implementedType&&implementedType.prototype&&(meta["implements"].push(implementedType),Class.extend(classProto,implementedType.prototype))}),classProto.__proto__=base.prototype;var theClass=function(){"function"==typeof this._constructor&&this._constructor.apply(this,arguments)};return meta.type=theClass,theClass.prototype=classProto,Object.defineProperty(theClass,".class.meta",{value:meta,enumerable:!1,configurable:!1,writable:!1}),Object.defineProperty(classProto,".class",{value:theClass,enumerable:!1,configurable:!1,writable:!1}),options.statics&&Class.extend(theClass,options.statics),theClass};Class.extend=inherit,Class.clone=function(object){return inherit({},object)};var Checker=Class({_constructor:function(object){this.object=object},typeOf:function(type){if(this.object instanceof type)return!0;var meta=Class.typeInfo(this.object);return meta&&findType(meta,type)}});Checker.prototype.a=Checker.prototype.typeOf,Checker.prototype.an=Checker.prototype.typeOf,Class.is=function(object){return new Checker(object)},Class.typeInfo=function(object){var theClass=object.__proto__[".class"];return theClass?theClass[".class.meta"]:void 0},Class.VERSION=[0,0,2],"undefined"!=typeof module?module.exports=Class:Plugin.StickersModule.Class=Class}(window),"document"in self&&("classList"in document.createElement("_")?!function(){"use strict";var testElement=document.createElement("_");if(testElement.classList.add("c1","c2"),!testElement.classList.contains("c2")){var createMethod=function(method){var original=DOMTokenList.prototype[method];DOMTokenList.prototype[method]=function(token){var i,len=arguments.length;for(i=0;len>i;i++)token=arguments[i],original.call(this,token)}};createMethod("add"),createMethod("remove")}if(testElement.classList.toggle("c3",!1),testElement.classList.contains("c3")){var _toggle=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(token,force){return 1 in arguments&&!this.contains(token)==!force?force:_toggle.call(this,token)}}testElement=null}():!function(view){"use strict";if("Element"in view){var classListProp="classList",protoProp="prototype",elemCtrProto=view.Element[protoProp],objCtr=Object,strTrim=String[protoProp].trim||function(){return this.replace(/^\s+|\s+$/g,"")},arrIndexOf=Array[protoProp].indexOf||function(item){for(var i=0,len=this.length;len>i;i++)if(i in this&&this[i]===item)return i;return-1},DOMEx=function(type,message){this.name=type,this.code=DOMException[type],this.message=message},checkTokenAndGetIndex=function(classList,token){if(""===token)throw new DOMEx("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(token))throw new DOMEx("INVALID_CHARACTER_ERR","String contains an invalid character");return arrIndexOf.call(classList,token)},ClassList=function(elem){for(var trimmedClasses=strTrim.call(elem.getAttribute("class")||""),classes=trimmedClasses?trimmedClasses.split(/\s+/):[],i=0,len=classes.length;len>i;i++)this.push(classes[i]);this._updateClassName=function(){elem.setAttribute("class",this.toString())}},classListProto=ClassList[protoProp]=[],classListGetter=function(){return new ClassList(this)};if(DOMEx[protoProp]=Error[protoProp],classListProto.item=function(i){return this[i]||null},classListProto.contains=function(token){return token+="",-1!==checkTokenAndGetIndex(this,token)},classListProto.add=function(){var token,tokens=arguments,i=0,l=tokens.length,updated=!1;do token=tokens[i]+"",-1===checkTokenAndGetIndex(this,token)&&(this.push(token),updated=!0);while(++i<l);updated&&this._updateClassName()},classListProto.remove=function(){var token,index,tokens=arguments,i=0,l=tokens.length,updated=!1;do for(token=tokens[i]+"",index=checkTokenAndGetIndex(this,token);-1!==index;)this.splice(index,1),updated=!0,index=checkTokenAndGetIndex(this,token);while(++i<l);updated&&this._updateClassName()},classListProto.toggle=function(token,force){token+="";var result=this.contains(token),method=result?force!==!0&&"remove":force!==!1&&"add";return method&&this[method](token),force===!0||force===!1?force:!result},classListProto.toString=function(){return this.join(" ")},objCtr.defineProperty){var classListPropDesc={get:classListGetter,enumerable:!0,configurable:!0};try{objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc)}catch(ex){-2146823252===ex.number&&(classListPropDesc.enumerable=!1,objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc))}}else objCtr[protoProp].__defineGetter__&&elemCtrProto.__defineGetter__(classListProp,classListGetter)}}(self)),function(Plugin){Plugin.StickersModule.Configs={configs:{},add:function(data){var configs={};for(var name in this.configs)configs[name]=this.configs[name];for(var name in data)configs[name]=data[name];this.configs=configs},set:function(name,value){this.configs[name]=value},get:function(name){return this.configs[name]},getAll:function(){return this.configs}}}(window),function(Plugin,Module){Module.StickerHelper={forEach:function(data,callback){for(var x in data)callback(data[x],x)},mergeOptions:function(obj1,obj2){var obj3={};for(var attrname in obj1)obj3[attrname]=obj1[attrname];for(var attrname in obj2)obj3[attrname]=obj2[attrname];return obj3},setEvent:function(eventType,el,className,callback){el.addEventListener(eventType,function(event){for(var found,el=event.target;el&&!(found=el.className.match(className));)el=el.parentElement;found&&callback(el,event)})},ajaxGet:function(url,apikey,callback,header){header=header||{};var xmlhttp;xmlhttp=new XMLHttpRequest,xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&callback(JSON.parse(xmlhttp.responseText))},xmlhttp.open("GET",url,!0),xmlhttp.setRequestHeader("Apikey",apikey),xmlhttp.setRequestHeader("Platform","JS"),xmlhttp.setRequestHeader("Localization",Module.Configs.get("lang")),this.forEach(header,function(value,name){xmlhttp.setRequestHeader(name,value)}),xmlhttp.send()},ajaxPost:function(url,apikey,data,callback,header){var xmlhttp,storageService=new Module.StorageService(Module.Configs.get("storagePrefix")),uniqUserId=storageService.getUniqUserId();xmlhttp=new XMLHttpRequest,xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&callback&&callback(JSON.parse(xmlhttp.responseText))},xmlhttp.open("POST",url,!0),xmlhttp.setRequestHeader("Apikey",apikey),xmlhttp.setRequestHeader("Platform","JS"),xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xmlhttp.setRequestHeader("DeviceId",uniqUserId),xmlhttp.setRequestHeader("Localization",Module.Configs.get("lang")),this.forEach(header,function(value,name){xmlhttp.setRequestHeader(name,value)}),xmlhttp.send(JSON.stringify(data))},md5:function(string){return StickersModule.MD5(string)}}}(window,window.StickersModule),function(Plugin){Plugin.StickersModule.Lockr={prefix:"",_getPrefixedKey:function(key,options){return options=options||{},options.noPrefix?key:this.prefix+key},set:function(key,value,options){var query_key=this._getPrefixedKey(key,options);try{localStorage.setItem(query_key,JSON.stringify({data:value}))}catch(e){console&&console.warn("Lockr didn't successfully save the \"{"+key+": "+value+'}" pair, because the localStorage is full.')}},get:function(key,missing,options){var value,query_key=this._getPrefixedKey(key,options);try{value=JSON.parse(localStorage.getItem(query_key))}catch(e){value=null}return null===value?missing:value.data||missing},sadd:function(key,value,options){var json,query_key=this._getPrefixedKey(key,options),values=this.smembers(key);if(values.indexOf(value)>-1)return null;try{values.push(value),json=JSON.stringify({data:values}),localStorage.setItem(query_key,json)}catch(e){console&&(console.log(e),console.warn("Lockr didn't successfully add the "+value+" to "+key+" set, because the localStorage is full."))}},smembers:function(key,options){var value,query_key=this._getPrefixedKey(key,options);try{value=JSON.parse(localStorage.getItem(query_key))}catch(e){value=null}return null===value?[]:value.data||[]},sismember:function(key,value,options){this._getPrefixedKey(key,options);return this.smembers(key).indexOf(value)>-1},getAll:function(){var keys=Object.keys(localStorage);return keys.map(function(key){return this.get(key)}.bind(this))},srem:function(key,value,options){var json,index,query_key=this._getPrefixedKey(key,options),values=this.smembers(key,value);index=values.indexOf(value),index>-1&&values.splice(index,1),json=JSON.stringify({data:values});try{localStorage.setItem(query_key,json)}catch(e){console&&console.warn("Lockr couldn't remove the "+value+" from the set "+key)}},rm:function(key){localStorage.removeItem(key)},flush:function(){localStorage.clear()}}}(window),function(Plugin){Plugin.StickersModule=Plugin.StickersModule||{},Plugin.StickersModule.MD5=function(string){function RotateLeft(lValue,iShiftBits){return lValue<<iShiftBits|lValue>>>32-iShiftBits}function AddUnsigned(lX,lY){var lX4,lY4,lX8,lY8,lResult;return lX8=2147483648&lX,lY8=2147483648&lY,lX4=1073741824&lX,lY4=1073741824&lY,lResult=(1073741823&lX)+(1073741823&lY),lX4&lY4?2147483648^lResult^lX8^lY8:lX4|lY4?1073741824&lResult?3221225472^lResult^lX8^lY8:1073741824^lResult^lX8^lY8:lResult^lX8^lY8}function F(x,y,z){return x&y|~x&z}function G(x,y,z){return x&z|y&~z}function H(x,y,z){return x^y^z}function I(x,y,z){return y^(x|~z)}function FF(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(F(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)}function GG(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(G(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)}function HH(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(H(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)}function II(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(I(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)}function ConvertToWordArray(string){for(var lWordCount,lMessageLength=string.length,lNumberOfWords_temp1=lMessageLength+8,lNumberOfWords_temp2=(lNumberOfWords_temp1-lNumberOfWords_temp1%64)/64,lNumberOfWords=16*(lNumberOfWords_temp2+1),lWordArray=Array(lNumberOfWords-1),lBytePosition=0,lByteCount=0;lMessageLength>lByteCount;)lWordCount=(lByteCount-lByteCount%4)/4,lBytePosition=lByteCount%4*8,lWordArray[lWordCount]=lWordArray[lWordCount]|string.charCodeAt(lByteCount)<<lBytePosition,lByteCount++;return lWordCount=(lByteCount-lByteCount%4)/4,lBytePosition=lByteCount%4*8,lWordArray[lWordCount]=lWordArray[lWordCount]|128<<lBytePosition,lWordArray[lNumberOfWords-2]=lMessageLength<<3,lWordArray[lNumberOfWords-1]=lMessageLength>>>29,lWordArray}function WordToHex(lValue){var lByte,lCount,WordToHexValue="",WordToHexValue_temp="";for(lCount=0;3>=lCount;lCount++)lByte=lValue>>>8*lCount&255,WordToHexValue_temp="0"+lByte.toString(16),WordToHexValue+=WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);return WordToHexValue}function Utf8Encode(string){string=string.replace(/\r\n/g,"\n");for(var utftext="",n=0;n<string.length;n++){var c=string.charCodeAt(n);128>c?utftext+=String.fromCharCode(c):c>127&&2048>c?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(63&c|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(63&c|128))}return utftext}string=string.toString();var k,AA,BB,CC,DD,a,b,c,d,x=Array(),S11=7,S12=12,S13=17,S14=22,S21=5,S22=9,S23=14,S24=20,S31=4,S32=11,S33=16,S34=23,S41=6,S42=10,S43=15,S44=21;for(string=Utf8Encode(string),x=ConvertToWordArray(string),a=1732584193,b=4023233417,c=2562383102,d=271733878,k=0;k<x.length;k+=16)AA=a,BB=b,CC=c,DD=d,a=FF(a,b,c,d,x[k+0],S11,3614090360),d=FF(d,a,b,c,x[k+1],S12,3905402710),c=FF(c,d,a,b,x[k+2],S13,606105819),b=FF(b,c,d,a,x[k+3],S14,3250441966),a=FF(a,b,c,d,x[k+4],S11,4118548399),d=FF(d,a,b,c,x[k+5],S12,1200080426),c=FF(c,d,a,b,x[k+6],S13,2821735955),b=FF(b,c,d,a,x[k+7],S14,4249261313),a=FF(a,b,c,d,x[k+8],S11,1770035416),d=FF(d,a,b,c,x[k+9],S12,2336552879),c=FF(c,d,a,b,x[k+10],S13,4294925233),b=FF(b,c,d,a,x[k+11],S14,2304563134),a=FF(a,b,c,d,x[k+12],S11,1804603682),d=FF(d,a,b,c,x[k+13],S12,4254626195),c=FF(c,d,a,b,x[k+14],S13,2792965006),b=FF(b,c,d,a,x[k+15],S14,1236535329),a=GG(a,b,c,d,x[k+1],S21,4129170786),d=GG(d,a,b,c,x[k+6],S22,3225465664),c=GG(c,d,a,b,x[k+11],S23,643717713),b=GG(b,c,d,a,x[k+0],S24,3921069994),a=GG(a,b,c,d,x[k+5],S21,3593408605),d=GG(d,a,b,c,x[k+10],S22,38016083),c=GG(c,d,a,b,x[k+15],S23,3634488961),b=GG(b,c,d,a,x[k+4],S24,3889429448),a=GG(a,b,c,d,x[k+9],S21,568446438),d=GG(d,a,b,c,x[k+14],S22,3275163606),c=GG(c,d,a,b,x[k+3],S23,4107603335),b=GG(b,c,d,a,x[k+8],S24,1163531501),a=GG(a,b,c,d,x[k+13],S21,2850285829),d=GG(d,a,b,c,x[k+2],S22,4243563512),c=GG(c,d,a,b,x[k+7],S23,1735328473),b=GG(b,c,d,a,x[k+12],S24,2368359562),a=HH(a,b,c,d,x[k+5],S31,4294588738),d=HH(d,a,b,c,x[k+8],S32,2272392833),c=HH(c,d,a,b,x[k+11],S33,1839030562),b=HH(b,c,d,a,x[k+14],S34,4259657740),a=HH(a,b,c,d,x[k+1],S31,2763975236),d=HH(d,a,b,c,x[k+4],S32,1272893353),c=HH(c,d,a,b,x[k+7],S33,4139469664),b=HH(b,c,d,a,x[k+10],S34,3200236656),a=HH(a,b,c,d,x[k+13],S31,681279174),d=HH(d,a,b,c,x[k+0],S32,3936430074),c=HH(c,d,a,b,x[k+3],S33,3572445317),b=HH(b,c,d,a,x[k+6],S34,76029189),a=HH(a,b,c,d,x[k+9],S31,3654602809),d=HH(d,a,b,c,x[k+12],S32,3873151461),c=HH(c,d,a,b,x[k+15],S33,530742520),b=HH(b,c,d,a,x[k+2],S34,3299628645),a=II(a,b,c,d,x[k+0],S41,4096336452),d=II(d,a,b,c,x[k+7],S42,1126891415),c=II(c,d,a,b,x[k+14],S43,2878612391),b=II(b,c,d,a,x[k+5],S44,4237533241),a=II(a,b,c,d,x[k+12],S41,1700485571),d=II(d,a,b,c,x[k+3],S42,2399980690),c=II(c,d,a,b,x[k+10],S43,4293915773),b=II(b,c,d,a,x[k+1],S44,2240044497),a=II(a,b,c,d,x[k+8],S41,1873313359),d=II(d,a,b,c,x[k+15],S42,4264355552),c=II(c,d,a,b,x[k+6],S43,2734768916),b=II(b,c,d,a,x[k+13],S44,1309151649),a=II(a,b,c,d,x[k+4],S41,4149444226),d=II(d,a,b,c,x[k+11],S42,3174756917),c=II(c,d,a,b,x[k+2],S43,718787259),b=II(b,c,d,a,x[k+9],S44,3951481745),a=AddUnsigned(a,AA),b=AddUnsigned(b,BB),c=AddUnsigned(c,CC),d=AddUnsigned(d,DD);var temp=WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);return temp.toLowerCase()}}(window),function(window,undefined){"use strict";function extend(){for(var i=1;i<arguments.length;i++)for(var key in arguments[i])arguments[i].hasOwnProperty(key)&&(arguments[0][key]=arguments[i][key]);return arguments[0]}function Plugin($container,options){function _initialize(){return self.update(),_setEvents(),self}function _setCss(){$thumb.style[posiLabel]=self.thumbPosition+"px",$overview.style[posiLabel]=-self.contentPosition+"px",$scrollbar.style[sizeLabel]=self.trackSize+"px",$track.style[sizeLabel]=self.trackSize+"px",$thumb.style[sizeLabel]=self.thumbSize+"px"}function _setEvents(){hasTouchEvents?$viewport.ontouchstart=function(event){1===event.touches.length&&(_start(event.touches[0]),event.stopPropagation())}:($thumb.onmousedown=function(event){event.stopPropagation(),_start(event)},$track.onmousedown=function(event){_start(event,!0)}),window.addEventListener("resize",function(){self.update("relative")},!0),self.options.wheel&&window.addEventListener?$container.addEventListener(wheelEvent,_wheel,!1):self.options.wheel&&($container.onmousewheel=_wheel)}function _isAtBegin(){return self.contentPosition>0}function _isAtEnd(){return self.contentPosition<=self.contentSize-self.viewportSize-5}function _start(event,gotoMouse){if(self.hasContentToSroll){posiLabel.charAt(0).toUpperCase()+posiLabel.slice(1).toLowerCase();mousePosition=gotoMouse?$thumb.getBoundingClientRect()[posiLabel]:isHorizontal?event.clientX:event.clientY,$body.className+=" noSelect",hasTouchEvents?(document.ontouchmove=function(event){(self.options.touchLock||_isAtBegin()&&_isAtEnd())&&event.preventDefault(),_drag(event.touches[0])},document.ontouchend=_end):(document.onmousemove=_drag,document.onmouseup=$thumb.onmouseup=_end),_drag(event)}}function _wheel(event){if(self.hasContentToSroll){var evntObj=event||window.event,wheelSpeedDelta=-(evntObj.deltaY||evntObj.detail||-1/3*evntObj.wheelDelta)/40;1===evntObj.deltaMode?self.options.wheelSpeed:1;wheelSpeedDelta=wheelSpeedDelta||0,self.contentPosition-=wheelSpeedDelta*self.options.wheelSpeed,self.contentPosition=Math.min(self.contentSize-self.viewportSize,Math.max(0,self.contentPosition)),self.thumbPosition=self.contentPosition/self.trackRatio,$container.dispatchEvent(moveEvent),$thumb.style[posiLabel]=self.thumbPosition+"px",$overview.style[posiLabel]=-self.contentPosition+"px",(self.options.wheelLock||_isAtBegin()&&_isAtEnd())&&evntObj.preventDefault()}}function _drag(event){if(self.hasContentToSroll){var mousePositionNew=isHorizontal?event.clientX:event.clientY,thumbPositionDelta=hasTouchEvents?mousePosition-mousePositionNew:mousePositionNew-mousePosition,thumbPositionNew=Math.min(self.trackSize-self.thumbSize,Math.max(0,self.thumbPosition+thumbPositionDelta));self.contentPosition=thumbPositionNew*self.trackRatio,$container.dispatchEvent(moveEvent),$thumb.style[posiLabel]=thumbPositionNew+"px",$overview.style[posiLabel]=-self.contentPosition+"px"}}function _end(){self.thumbPosition=parseInt($thumb.style[posiLabel],10)||0,$body.className=$body.className.replace(" noSelect",""),document.onmousemove=document.onmouseup=null,$thumb.onmouseup=null,$track.onmouseup=null,document.ontouchmove=document.ontouchend=null}this.options=extend({},defaults,options),this._defaults=defaults,this._name=pluginName;var self=this,$body=document.querySelectorAll("body")[0],$viewport=$container.querySelectorAll(".viewport")[0],$overview=$container.querySelectorAll(".overview")[0],$scrollbar=$container.querySelectorAll(".scrollbar")[0],$track=$scrollbar.querySelectorAll(".track")[0],$thumb=$scrollbar.querySelectorAll(".thumb")[0],mousePosition=0,isHorizontal="x"===this.options.axis,hasTouchEvents="ontouchstart"in document.documentElement,wheelEvent="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll",sizeLabel=isHorizontal?"width":"height",posiLabel=isHorizontal?"left":"top",moveEvent=document.createEvent("HTMLEvents");return moveEvent.initEvent("move",!0,!0),this.contentPosition=0,this.viewportSize=0,this.contentSize=0,this.contentRatio=0,this.trackSize=0,this.trackRatio=0,this.thumbSize=0,this.thumbPosition=0,this.hasContentToSroll=!1,this.update=function(scrollTo){var sizeLabelCap=sizeLabel.charAt(0).toUpperCase()+sizeLabel.slice(1).toLowerCase(),scrcls=$scrollbar.className;switch(this.viewportSize=$viewport["offset"+sizeLabelCap],this.contentSize=$overview["scroll"+sizeLabelCap],this.contentRatio=this.viewportSize/this.contentSize,this.trackSize=this.options.trackSize||this.viewportSize,this.trackSize-=2,this.thumbSize=Math.min(this.trackSize,Math.max(this.options.thumbSizeMin,this.options.thumbSize||this.trackSize*this.contentRatio)),this.trackRatio=(this.contentSize-this.viewportSize)/(this.trackSize-this.thumbSize),this.hasContentToSroll=this.contentRatio<1,$scrollbar.className=this.hasContentToSroll?scrcls.replace(/disable/g,""):scrcls.replace(/ disable/g,"")+" disable",scrollTo){case"bottom":this.contentPosition=Math.max(this.contentSize-this.viewportSize,0);break;case"relative":this.contentPosition=Math.min(Math.max(this.contentSize-this.viewportSize,0),Math.max(0,this.contentPosition));break;default:this.contentPosition=parseInt(scrollTo,10)||0}return this.thumbPosition=self.contentPosition/self.trackRatio,_setCss(),self},_initialize()}var pluginName="tinyscrollbar",defaults={axis:"y",wheel:!0,wheelSpeed:40,wheelLock:!0,touchLock:!0,trackSize:!1,thumbSize:!1,thumbSizeMin:20},tinyscrollbar=function($container,options){return new Plugin($container,options)};"function"==typeof define&&define.amd?define(function(){return tinyscrollbar}):"object"==typeof module&&module.exports?module.exports=tinyscrollbar:window.StickersModule.Tinyscrollbar=tinyscrollbar}(window),function(Plugin){Plugin.StickersModule=Plugin.StickersModule||{},Plugin.StickersModule.Twemoji=function(){"use strict";function createText(text){return document.createTextNode(text)}function escapeHTML(s){return s.replace(rescaper,replacer)}function defaultImageSrcGenerator(icon,options){return"".concat(options.base,options.size,"/",icon,options.ext)}function grabAllTextNodes(node,allText){for(var subnode,nodeType,childNodes=node.childNodes,length=childNodes.length;length--;)subnode=childNodes[length],nodeType=subnode.nodeType,3===nodeType?allText.push(subnode):1!==nodeType||shouldntBeParsed.test(subnode.nodeName)||grabAllTextNodes(subnode,allText);return allText}function grabTheRightIcon(icon,variant){return toCodePoint("️"===variant?icon.slice(0,-1):3===icon.length&&"️"===icon.charAt(1)?icon.charAt(0)+icon.charAt(2):icon)}function parseNode(node,options){for(var attrib,attrname,modified,fragment,subnode,text,match,i,index,img,alt,icon,variant,src,allText=grabAllTextNodes(node,[]),length=allText.length;length--;){for(modified=!1,fragment=document.createDocumentFragment(),subnode=allText[length],text=subnode.nodeValue,i=0;match=re.exec(text);){if(index=match.index,index!==i&&fragment.appendChild(createText(text.slice(i,index))),alt=match[0],icon=match[1],variant=match[2],i=index+alt.length,"︎"!==variant&&(src=options.callback(grabTheRightIcon(icon,variant),options,variant))){img=new Image,img.onerror=options.onerror,img.setAttribute("draggable","false"),attrib=options.attributes(icon,variant);for(attrname in attrib)attrib.hasOwnProperty(attrname)&&0!==attrname.indexOf("on")&&!img.hasAttribute(attrname)&&img.setAttribute(attrname,attrib[attrname]);img.className=options.className,img.alt=alt,img.src=src,modified=!0,fragment.appendChild(img)}img||fragment.appendChild(createText(alt)),img=null}modified&&(i<text.length&&fragment.appendChild(createText(text.slice(i))),subnode.parentNode.replaceChild(fragment,subnode))}return node}function parseString(str,options){return replace(str,function(match,icon,variant){var attrib,attrname,src,ret=match;if("︎"!==variant&&(src=options.callback(grabTheRightIcon(icon,variant),options,variant))){ret="<img ".concat('class="',options.className,'" ','draggable="false" ','alt="',match,'"',' src="',src,'"'),attrib=options.attributes(icon,variant);for(attrname in attrib)attrib.hasOwnProperty(attrname)&&0!==attrname.indexOf("on")&&-1===ret.indexOf(" "+attrname+"=")&&(ret=ret.concat(" ",attrname,'="',escapeHTML(attrib[attrname]),'"'));ret=ret.concat(">")}return ret})}function replacer(m){return escaper[m]}function returnNull(){return null}function toSizeSquaredAsset(value){return"number"==typeof value?value+"x"+value:value}function fromCodePoint(codepoint){var code="string"==typeof codepoint?parseInt(codepoint,16):codepoint;return 65536>code?fromCharCode(code):(code-=65536,fromCharCode(55296+(code>>10),56320+(1023&code)))}function parse(what,how){return how&&"function"!=typeof how||(how={callback:how}),("string"==typeof what?parseString:parseNode)(what,{callback:how.callback||defaultImageSrcGenerator,attributes:"function"==typeof how.attributes?how.attributes:returnNull,base:"string"==typeof how.base?how.base:twemoji.base,ext:how.ext||twemoji.ext,size:how.folder||toSizeSquaredAsset(how.size||twemoji.size),className:how.className||twemoji.className,onerror:how.onerror||twemoji.onerror})}function replace(text,callback){return String(text).replace(re,callback)}function test(text){re.lastIndex=0;var result=re.test(text);return re.lastIndex=0,result}function toCodePoint(unicodeSurrogates,sep){for(var r=[],c=0,p=0,i=0;i<unicodeSurrogates.length;)c=unicodeSurrogates.charCodeAt(i++),p?(r.push((65536+(p-55296<<10)+(c-56320)).toString(16)),p=0):c>=55296&&56319>=c?p=c:r.push(c.toString(16));return r.join(sep||"-")}var twemoji={base:("https:"===location.protocol?"https:":"http:")+"//twemoji.maxcdn.com/",ext:".png",size:"36x36",className:"emoji",convert:{fromCodePoint:fromCodePoint,toCodePoint:toCodePoint},onerror:function(){this.parentNode&&this.parentNode.replaceChild(createText(this.alt),this)},parse:parse,replace:replace,test:test},escaper={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},re=/((?:\ud83c\udde8\ud83c\uddf3|\ud83c\uddfa\ud83c\uddf8|\ud83c\uddf7\ud83c\uddfa|\ud83c\uddf0\ud83c\uddf7|\ud83c\uddef\ud83c\uddf5|\ud83c\uddee\ud83c\uddf9|\ud83c\uddec\ud83c\udde7|\ud83c\uddeb\ud83c\uddf7|\ud83c\uddea\ud83c\uddf8|\ud83c\udde9\ud83c\uddea|\u0039\ufe0f?\u20e3|\u0038\ufe0f?\u20e3|\u0037\ufe0f?\u20e3|\u0036\ufe0f?\u20e3|\u0035\ufe0f?\u20e3|\u0034\ufe0f?\u20e3|\u0033\ufe0f?\u20e3|\u0032\ufe0f?\u20e3|\u0031\ufe0f?\u20e3|\u0030\ufe0f?\u20e3|\u0023\ufe0f?\u20e3|\ud83d\udeb3|\ud83d\udeb1|\ud83d\udeb0|\ud83d\udeaf|\ud83d\udeae|\ud83d\udea6|\ud83d\udea3|\ud83d\udea1|\ud83d\udea0|\ud83d\ude9f|\ud83d\ude9e|\ud83d\ude9d|\ud83d\ude9c|\ud83d\ude9b|\ud83d\ude98|\ud83d\ude96|\ud83d\ude94|\ud83d\ude90|\ud83d\ude8e|\ud83d\ude8d|\ud83d\ude8b|\ud83d\ude8a|\ud83d\ude88|\ud83d\ude86|\ud83d\ude82|\ud83d\ude81|\ud83d\ude36|\ud83d\ude34|\ud83d\ude2f|\ud83d\ude2e|\ud83d\ude2c|\ud83d\ude27|\ud83d\ude26|\ud83d\ude1f|\ud83d\ude1b|\ud83d\ude19|\ud83d\ude17|\ud83d\ude15|\ud83d\ude11|\ud83d\ude10|\ud83d\ude0e|\ud83d\ude08|\ud83d\ude07|\ud83d\ude00|\ud83d\udd67|\ud83d\udd66|\ud83d\udd65|\ud83d\udd64|\ud83d\udd63|\ud83d\udd62|\ud83d\udd61|\ud83d\udd60|\ud83d\udd5f|\ud83d\udd5e|\ud83d\udd5d|\ud83d\udd5c|\ud83d\udd2d|\ud83d\udd2c|\ud83d\udd15|\ud83d\udd09|\ud83d\udd08|\ud83d\udd07|\ud83d\udd06|\ud83d\udd05|\ud83d\udd04|\ud83d\udd02|\ud83d\udd01|\ud83d\udd00|\ud83d\udcf5|\ud83d\udcef|\ud83d\udced|\ud83d\udcec|\ud83d\udcb7|\ud83d\udcb6|\ud83d\udcad|\ud83d\udc6d|\ud83d\udc6c|\ud83d\udc65|\ud83d\udc2a|\ud83d\udc16|\ud83d\udc15|\ud83d\udc13|\ud83d\udc10|\ud83d\udc0f|\ud83d\udc0b|\ud83d\udc0a|\ud83d\udc09|\ud83d\udc08|\ud83d\udc07|\ud83d\udc06|\ud83d\udc05|\ud83d\udc04|\ud83d\udc03|\ud83d\udc02|\ud83d\udc01|\ud83d\udc00|\ud83c\udfe4|\ud83c\udfc9|\ud83c\udfc7|\ud83c\udf7c|\ud83c\udf50|\ud83c\udf4b|\ud83c\udf33|\ud83c\udf32|\ud83c\udf1e|\ud83c\udf1d|\ud83c\udf1c|\ud83c\udf1a|\ud83c\udf18|\ud83c\udccf|\ud83c\udd8e|\ud83c\udd91|\ud83c\udd92|\ud83c\udd93|\ud83c\udd94|\ud83c\udd95|\ud83c\udd96|\ud83c\udd97|\ud83c\udd98|\ud83c\udd99|\ud83c\udd9a|\ud83d\udc77|\ud83d\udec5|\ud83d\udec4|\ud83d\udec3|\ud83d\udec2|\ud83d\udec1|\ud83d\udebf|\ud83d\udeb8|\ud83d\udeb7|\ud83d\udeb5|\ud83c\ude01|\ud83c\ude32|\ud83c\ude33|\ud83c\ude34|\ud83c\ude35|\ud83c\ude36|\ud83c\ude38|\ud83c\ude39|\ud83c\ude3a|\ud83c\ude50|\ud83c\ude51|\ud83c\udf00|\ud83c\udf01|\ud83c\udf02|\ud83c\udf03|\ud83c\udf04|\ud83c\udf05|\ud83c\udf06|\ud83c\udf07|\ud83c\udf08|\ud83c\udf09|\ud83c\udf0a|\ud83c\udf0b|\ud83c\udf0c|\ud83c\udf0f|\ud83c\udf11|\ud83c\udf13|\ud83c\udf14|\ud83c\udf15|\ud83c\udf19|\ud83c\udf1b|\ud83c\udf1f|\ud83c\udf20|\ud83c\udf30|\ud83c\udf31|\ud83c\udf34|\ud83c\udf35|\ud83c\udf37|\ud83c\udf38|\ud83c\udf39|\ud83c\udf3a|\ud83c\udf3b|\ud83c\udf3c|\ud83c\udf3d|\ud83c\udf3e|\ud83c\udf3f|\ud83c\udf40|\ud83c\udf41|\ud83c\udf42|\ud83c\udf43|\ud83c\udf44|\ud83c\udf45|\ud83c\udf46|\ud83c\udf47|\ud83c\udf48|\ud83c\udf49|\ud83c\udf4a|\ud83c\udf4c|\ud83c\udf4d|\ud83c\udf4e|\ud83c\udf4f|\ud83c\udf51|\ud83c\udf52|\ud83c\udf53|\ud83c\udf54|\ud83c\udf55|\ud83c\udf56|\ud83c\udf57|\ud83c\udf58|\ud83c\udf59|\ud83c\udf5a|\ud83c\udf5b|\ud83c\udf5c|\ud83c\udf5d|\ud83c\udf5e|\ud83c\udf5f|\ud83c\udf60|\ud83c\udf61|\ud83c\udf62|\ud83c\udf63|\ud83c\udf64|\ud83c\udf65|\ud83c\udf66|\ud83c\udf67|\ud83c\udf68|\ud83c\udf69|\ud83c\udf6a|\ud83c\udf6b|\ud83c\udf6c|\ud83c\udf6d|\ud83c\udf6e|\ud83c\udf6f|\ud83c\udf70|\ud83c\udf71|\ud83c\udf72|\ud83c\udf73|\ud83c\udf74|\ud83c\udf75|\ud83c\udf76|\ud83c\udf77|\ud83c\udf78|\ud83c\udf79|\ud83c\udf7a|\ud83c\udf7b|\ud83c\udf80|\ud83c\udf81|\ud83c\udf82|\ud83c\udf83|\ud83c\udf84|\ud83c\udf85|\ud83c\udf86|\ud83c\udf87|\ud83c\udf88|\ud83c\udf89|\ud83c\udf8a|\ud83c\udf8b|\ud83c\udf8c|\ud83c\udf8d|\ud83c\udf8e|\ud83c\udf8f|\ud83c\udf90|\ud83c\udf91|\ud83c\udf92|\ud83c\udf93|\ud83c\udfa0|\ud83c\udfa1|\ud83c\udfa2|\ud83c\udfa3|\ud83c\udfa4|\ud83c\udfa5|\ud83c\udfa6|\ud83c\udfa7|\ud83c\udfa8|\ud83c\udfa9|\ud83c\udfaa|\ud83c\udfab|\ud83c\udfac|\ud83c\udfad|\ud83c\udfae|\ud83c\udfaf|\ud83c\udfb0|\ud83c\udfb1|\ud83c\udfb2|\ud83c\udfb3|\ud83c\udfb4|\ud83c\udfb5|\ud83c\udfb6|\ud83c\udfb7|\ud83c\udfb8|\ud83c\udfb9|\ud83c\udfba|\ud83c\udfbb|\ud83c\udfbc|\ud83c\udfbd|\ud83c\udfbe|\ud83c\udfbf|\ud83c\udfc0|\ud83c\udfc1|\ud83c\udfc2|\ud83c\udfc3|\ud83c\udfc4|\ud83c\udfc6|\ud83c\udfc8|\ud83c\udfca|\ud83c\udfe0|\ud83c\udfe1|\ud83c\udfe2|\ud83c\udfe3|\ud83c\udfe5|\ud83c\udfe6|\ud83c\udfe7|\ud83c\udfe8|\ud83c\udfe9|\ud83c\udfea|\ud83c\udfeb|\ud83c\udfec|\ud83c\udfed|\ud83c\udfee|\ud83c\udfef|\ud83c\udff0|\ud83d\udc0c|\ud83d\udc0d|\ud83d\udc0e|\ud83d\udc11|\ud83d\udc12|\ud83d\udc14|\ud83d\udc17|\ud83d\udc18|\ud83d\udc19|\ud83d\udc1a|\ud83d\udc1b|\ud83d\udc1c|\ud83d\udc1d|\ud83d\udc1e|\ud83d\udc1f|\ud83d\udc20|\ud83d\udc21|\ud83d\udc22|\ud83d\udc23|\ud83d\udc24|\ud83d\udc25|\ud83d\udc26|\ud83d\udc27|\ud83d\udc28|\ud83d\udc29|\ud83d\udc2b|\ud83d\udc2c|\ud83d\udc2d|\ud83d\udc2e|\ud83d\udc2f|\ud83d\udc30|\ud83d\udc31|\ud83d\udc32|\ud83d\udc33|\ud83d\udc34|\ud83d\udc35|\ud83d\udc36|\ud83d\udc37|\ud83d\udc38|\ud83d\udc39|\ud83d\udc3a|\ud83d\udc3b|\ud83d\udc3c|\ud83d\udc3d|\ud83d\udc3e|\ud83d\udc40|\ud83d\udc42|\ud83d\udc43|\ud83d\udc44|\ud83d\udc45|\ud83d\udc46|\ud83d\udc47|\ud83d\udc48|\ud83d\udc49|\ud83d\udc4a|\ud83d\udc4b|\ud83d\udc4c|\ud83d\udc4d|\ud83d\udc4e|\ud83d\udc4f|\ud83d\udc50|\ud83d\udc51|\ud83d\udc52|\ud83d\udc53|\ud83d\udc54|\ud83d\udc55|\ud83d\udc56|\ud83d\udc57|\ud83d\udc58|\ud83d\udc59|\ud83d\udc5a|\ud83d\udc5b|\ud83d\udc5c|\ud83d\udc5d|\ud83d\udc5e|\ud83d\udc5f|\ud83d\udc60|\ud83d\udc61|\ud83d\udc62|\ud83d\udc63|\ud83d\udc64|\ud83d\udc66|\ud83d\udc67|\ud83d\udc68|\ud83d\udc69|\ud83d\udc6a|\ud83d\udc6b|\ud83d\udc6e|\ud83d\udc6f|\ud83d\udc70|\ud83d\udc71|\ud83d\udc72|\ud83d\udc73|\ud83d\udc74|\ud83d\udc75|\ud83d\udc76|\ud83d\udeb4|\ud83d\udc78|\ud83d\udc79|\ud83d\udc7a|\ud83d\udc7b|\ud83d\udc7c|\ud83d\udc7d|\ud83d\udc7e|\ud83d\udc7f|\ud83d\udc80|\ud83d\udc81|\ud83d\udc82|\ud83d\udc83|\ud83d\udc84|\ud83d\udc85|\ud83d\udc86|\ud83d\udc87|\ud83d\udc88|\ud83d\udc89|\ud83d\udc8a|\ud83d\udc8b|\ud83d\udc8c|\ud83d\udc8d|\ud83d\udc8e|\ud83d\udc8f|\ud83d\udc90|\ud83d\udc91|\ud83d\udc92|\ud83d\udc93|\ud83d\udc94|\ud83d\udc95|\ud83d\udc96|\ud83d\udc97|\ud83d\udc98|\ud83d\udc99|\ud83d\udc9a|\ud83d\udc9b|\ud83d\udc9c|\ud83d\udc9d|\ud83d\udc9e|\ud83d\udc9f|\ud83d\udca0|\ud83d\udca1|\ud83d\udca2|\ud83d\udca3|\ud83d\udca4|\ud83d\udca5|\ud83d\udca6|\ud83d\udca7|\ud83d\udca8|\ud83d\udca9|\ud83d\udcaa|\ud83d\udcab|\ud83d\udcac|\ud83d\udcae|\ud83d\udcaf|\ud83d\udcb0|\ud83d\udcb1|\ud83d\udcb2|\ud83d\udcb3|\ud83d\udcb4|\ud83d\udcb5|\ud83d\udcb8|\ud83d\udcb9|\ud83d\udcba|\ud83d\udcbb|\ud83d\udcbc|\ud83d\udcbd|\ud83d\udcbe|\ud83d\udcbf|\ud83d\udcc0|\ud83d\udcc1|\ud83d\udcc2|\ud83d\udcc3|\ud83d\udcc4|\ud83d\udcc5|\ud83d\udcc6|\ud83d\udcc7|\ud83d\udcc8|\ud83d\udcc9|\ud83d\udcca|\ud83d\udccb|\ud83d\udccc|\ud83d\udccd|\ud83d\udcce|\ud83d\udccf|\ud83d\udcd0|\ud83d\udcd1|\ud83d\udcd2|\ud83d\udcd3|\ud83d\udcd4|\ud83d\udcd5|\ud83d\udcd6|\ud83d\udcd7|\ud83d\udcd8|\ud83d\udcd9|\ud83d\udcda|\ud83d\udcdb|\ud83d\udcdc|\ud83d\udcdd|\ud83d\udcde|\ud83d\udcdf|\ud83d\udce0|\ud83d\udce1|\ud83d\udce2|\ud83d\udce3|\ud83d\udce4|\ud83d\udce5|\ud83d\udce6|\ud83d\udce7|\ud83d\udce8|\ud83d\udce9|\ud83d\udcea|\ud83d\udceb|\ud83d\udcee|\ud83d\udcf0|\ud83d\udcf1|\ud83d\udcf2|\ud83d\udcf3|\ud83d\udcf4|\ud83d\udcf6|\ud83d\udcf7|\ud83d\udcf9|\ud83d\udcfa|\ud83d\udcfb|\ud83d\udcfc|\ud83d\udd03|\ud83d\udd0a|\ud83d\udd0b|\ud83d\udd0c|\ud83d\udd0d|\ud83d\udd0e|\ud83d\udd0f|\ud83d\udd10|\ud83d\udd11|\ud83d\udd12|\ud83d\udd13|\ud83d\udd14|\ud83d\udd16|\ud83d\udd17|\ud83d\udd18|\ud83d\udd19|\ud83d\udd1a|\ud83d\udd1b|\ud83d\udd1c|\ud83d\udd1d|\ud83d\udd1e|\ud83d\udd1f|\ud83d\udd20|\ud83d\udd21|\ud83d\udd22|\ud83d\udd23|\ud83d\udd24|\ud83d\udd25|\ud83d\udd26|\ud83d\udd27|\ud83d\udd28|\ud83d\udd29|\ud83d\udd2a|\ud83d\udd2b|\ud83d\udd2e|\ud83d\udd2f|\ud83d\udd30|\ud83d\udd31|\ud83d\udd32|\ud83d\udd33|\ud83d\udd34|\ud83d\udd35|\ud83d\udd36|\ud83d\udd37|\ud83d\udd38|\ud83d\udd39|\ud83d\udd3a|\ud83d\udd3b|\ud83d\udd3c|\ud83d\udd3d|\ud83d\udd50|\ud83d\udd51|\ud83d\udd52|\ud83d\udd53|\ud83d\udd54|\ud83d\udd55|\ud83d\udd56|\ud83d\udd57|\ud83d\udd58|\ud83d\udd59|\ud83d\udd5a|\ud83d\udd5b|\ud83d\uddfb|\ud83d\uddfc|\ud83d\uddfd|\ud83d\uddfe|\ud83d\uddff|\ud83d\ude01|\ud83d\ude02|\ud83d\ude03|\ud83d\ude04|\ud83d\ude05|\ud83d\ude06|\ud83d\ude09|\ud83d\ude0a|\ud83d\ude0b|\ud83d\ude0c|\ud83d\ude0d|\ud83d\ude0f|\ud83d\ude12|\ud83d\ude13|\ud83d\ude14|\ud83d\ude16|\ud83d\ude18|\ud83d\ude1a|\ud83d\ude1c|\ud83d\ude1d|\ud83d\ude1e|\ud83d\ude20|\ud83d\ude21|\ud83d\ude22|\ud83d\ude23|\ud83d\ude24|\ud83d\ude25|\ud83d\ude28|\ud83d\ude29|\ud83d\ude2a|\ud83d\ude2b|\ud83d\ude2d|\ud83d\ude30|\ud83d\ude31|\ud83d\ude32|\ud83d\ude33|\ud83d\ude35|\ud83d\ude37|\ud83d\ude38|\ud83d\ude39|\ud83d\ude3a|\ud83d\ude3b|\ud83d\ude3c|\ud83d\ude3d|\ud83d\ude3e|\ud83d\ude3f|\ud83d\ude40|\ud83d\ude45|\ud83d\ude46|\ud83d\ude47|\ud83d\ude48|\ud83d\ude49|\ud83d\ude4a|\ud83d\ude4b|\ud83d\ude4c|\ud83d\ude4d|\ud83d\ude4e|\ud83d\ude4f|\ud83d\ude80|\ud83d\ude83|\ud83d\ude84|\ud83d\ude85|\ud83d\ude87|\ud83d\ude89|\ud83d\ude8c|\ud83d\ude8f|\ud83d\ude91|\ud83d\ude92|\ud83d\ude93|\ud83d\ude95|\ud83d\ude97|\ud83d\ude99|\ud83d\ude9a|\ud83d\udea2|\ud83d\udea4|\ud83d\udea5|\ud83d\udea7|\ud83d\udea8|\ud83d\udea9|\ud83d\udeaa|\ud83d\udeab|\ud83d\udeac|\ud83d\udead|\ud83d\udeb2|\ud83d\udeb6|\ud83d\udeb9|\ud83d\udeba|\ud83d\udebb|\ud83d\udebc|\ud83d\udebd|\ud83d\udebe|\ud83d\udec0|\ud83c\udde6|\ud83c\udde7|\ud83c\udde8|\ud83c\udde9|\ud83c\uddea|\ud83c\uddeb|\ud83c\uddec|\ud83c\udded|\ud83c\uddee|\ud83c\uddef|\ud83c\uddf0|\ud83c\uddf1|\ud83c\uddf2|\ud83c\uddf3|\ud83c\uddf4|\ud83c\uddf5|\ud83c\uddf6|\ud83c\uddf7|\ud83c\uddf8|\ud83c\uddf9|\ud83c\uddfa|\ud83c\uddfb|\ud83c\uddfc|\ud83c\uddfd|\ud83c\uddfe|\ud83c\uddff|\ud83c\udf0d|\ud83c\udf0e|\ud83c\udf10|\ud83c\udf12|\ud83c\udf16|\ud83c\udf17|\ue50a|\u27b0|\u2797|\u2796|\u2795|\u2755|\u2754|\u2753|\u274e|\u274c|\u2728|\u270b|\u270a|\u2705|\u26ce|\u23f3|\u23f0|\u23ec|\u23eb|\u23ea|\u23e9|\u27bf|\u00a9|\u00ae)|(?:(?:\ud83c\udc04|\ud83c\udd70|\ud83c\udd71|\ud83c\udd7e|\ud83c\udd7f|\ud83c\ude02|\ud83c\ude1a|\ud83c\ude2f|\ud83c\ude37|\u3299|\u303d|\u3030|\u2b55|\u2b50|\u2b1c|\u2b1b|\u2b07|\u2b06|\u2b05|\u2935|\u2934|\u27a1|\u2764|\u2757|\u2747|\u2744|\u2734|\u2733|\u2716|\u2714|\u2712|\u270f|\u270c|\u2709|\u2708|\u2702|\u26fd|\u26fa|\u26f5|\u26f3|\u26f2|\u26ea|\u26d4|\u26c5|\u26c4|\u26be|\u26bd|\u26ab|\u26aa|\u26a1|\u26a0|\u2693|\u267f|\u267b|\u3297|\u2666|\u2665|\u2663|\u2660|\u2653|\u2652|\u2651|\u2650|\u264f|\u264e|\u264d|\u264c|\u264b|\u264a|\u2649|\u2648|\u263a|\u261d|\u2615|\u2614|\u2611|\u260e|\u2601|\u2600|\u25fe|\u25fd|\u25fc|\u25fb|\u25c0|\u25b6|\u25ab|\u25aa|\u24c2|\u231b|\u231a|\u21aa|\u21a9|\u2199|\u2198|\u2197|\u2196|\u2195|\u2194|\u2139|\u2122|\u2049|\u203c|\u2668)([\uFE0E\uFE0F]?)))/g,rescaper=/[&<>'"]/g,shouldntBeParsed=/IFRAME|NOFRAMES|NOSCRIPT|SCRIPT|SELECT|STYLE|TEXTAREA|[a-z]/,fromCharCode=String.fromCharCode;
return twemoji}()}(window),function(Module){Module.Configs.add({elId:"stickerPipe",storeContainerId:"stickerPipeStore",tabItemClass:"sp-tab-item",stickerItemClass:"sp-sticker-item",emojiItemClass:"sp-emoji",emojiTabContent:'<span class="sp-icon-face"></span>',historyTabContent:'<span class="sp-icon-clock"></span>',storeTabContent:'<span class="sp-icon-plus"></span>',settingsTabContent:'<span class="sp-icon-settings"></span>',prevPacksTabContent:'<span class="sp-icon-arrow-back"></span>',nextPacksTabContent:'<span class="sp-icon-arrow-forward"></span>',domain:"http://api.stickerpipe.com",baseFolder:"stk",htmlForEmptyRecent:'<div class="emptyRecent">Ваши Стикеры</div>',apikey:"72921666b5ff8651f374747bfefaf7b2",clientPacksUrl:"http://api.stickerpipe.com/api/v1/client-packs",userPacksUrl:"http://api.stickerpipe.com/api/v1/user/packs",userPackUrl:"http://api.stickerpipe.com/api/v1/user/pack",trackStatUrl:"http://api.stickerpipe.com/api/v1/track-statistic",storeUrl:"http://api.stickerpipe.com/api/v1/web",storagePrefix:"stickerPipe",enableEmojiTab:!1,enableHistoryTab:!1,enableSettingsTab:!1,enableStoreTab:!1,userId:null,display:"block",width:"320px",lang:document.documentElement.lang.substr(0,2)||"en"})}(window.StickersModule),function(Module){Module.Configs.add({emojiList:["😊","😃","😁","😂","😀","😇","😈","😎","😐","😑","😕","😗","😙","😛","😟","😦","😧","😬","😮","😯","😴","😶","😄","😅","😆","😉","😋","😌","😍","😏","😒","😓","😔","😖","😘","😚","😜","😝","😞","😠","😡","😢","😣","😤","😥","😨","😩","😪","😫","😭","😰","😱","😲","😳","😵","😷","😸","😹","😺","😻","😼","😽","😾","😿","🙀","🙅","🙆","🙇","🙈","🙉","🙊","🙋","🙌","🙍","🙎","🙏","✂","✅","✈","✉","✊","✋","✌","✏","✒","✔","✖","✨","✳","✴","❄","❇","❌","❎","❓","❔","❕","❗","❤","➕","➖","➗","➡","➰","🚀","🚃","🚄","🚅","🚇","🚉","🚌","🚏","🚑","🚒","🚓","🚕","🚗","🚙","🚚","🚢","🚤","🚥","🚧","🚨","🚩","🚪","🚫","🚬","🚭","🚲","🚶","🚹","🚺","🚻","🚼","🚽","🚾","🛀","Ⓜ","🅰","🅱","🅾","🅿","🆎","🆑","🆒","🆓","🆔","🆕","🆖","🆗","🆘","🆙","🆚","🇩🇪","🇬🇧","🇨🇳","🇯🇵","🇰🇷","🇫🇷","🇪🇸","🇮🇹","🇺🇸","🇷🇺","🈁","🈂","🈚","🈯","🈲","🈳","🈴","🈵","🈶","🈷","🈸","🈹","🈺","🉐","🉑","©","®","‼","⁉","8⃣","9⃣","7⃣","6⃣","1⃣","0⃣","2⃣","3⃣","5⃣","4⃣","#⃣","™","ℹ","↔","↕","↖","↗","↘","↙","↩","↪","⌚","⌛","⏩","⏪","⏫","⏬","⏰","⏳","▪","▫","▶","◀","◻","◼","◽","◾","☀","☁","☎","☑","☔","☕","☝","☺","♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓","♠","♣","♥","♦","♨","♻","♿","⚓","⚠","⚡","⚪","⚫","⚽","⚾","⛄","⛅","⛎","⛔","⛪","⛲","⛳","⛵","⛺","⛽","⤴","⤵","⬅","⬆","⬇","⬛","⬜","⭐","⭕","〰","〽","㊗","㊙","🀄","🃏","🌀","🌁","🌂","🌃","🌄","🌅","🌆","🌇","🌈","🌉","🌊","🌋","🌌","🌏","🌑","🌓","🌔","🌕","🌙","🌛","🌟","🌠","🌰","🌱","🌴","🌵","🌷","🌸","🌹","🌺","🌻","🌼","🌽","🌾","🌿","🍀","🍁","🍂","🍃","🍄","🍅","🍆","🍇","🍈","🍉","🍊","🍌","🍍","🍎","🍏","🍑","🍒","🍓","🍔","🍕","🍖","🍗","🍘","🍙","🍚","🍛","🍜","🍝","🍞","🍟","🍠","🍡","🍢","🍣","🍤","🍥","🍦","🍧","🍨","🍩","🍪","🍫","🍬","🍭","🍮","🍯","🍰","🍱","🍲","🍳","🍴","🍵","🍶","🍷","🍸","🍹","🍺","🍻","🎀","🎁","🎂","🎃","🎄","🎅","🎆","🎇","🎈","🎉","🎊","🎋","🎌","🎍","🎎","🎏","🎐","🎑","🎒","🎓","🎠","🎡","🎢","🎣","🎤","🎥","🎦","🎧","🎨","🎩","🎪","🎫","🎬","🎭","🎮","🎯","🎰","🎱","🎲","🎳","🎴","🎵","🎶","🎷","🎸","🎹","🎺","🎻","🎼","🎽","🎾","🎿","🏀","🏁","🏂","🏃","🏄","🏆","🏈","🏊","🏠","🏡","🏢","🏣","🏥","🏦","🏧","🏨","🏩","🏪","🏫","🏬","🏭","🏮","🏯","🏰","🐌","🐍","🐎","🐑","🐒","🐔","🐗","🐘","🐙","🐚","🐛","🐜","🐝","🐞","🐟","🐠","🐡","🐢","🐣","🐤","🐥","🐦","🐧","🐨","🐩","🐫","🐬","🐭","🐮","🐯","🐰","🐱","🐲","🐳","🐴","🐵","🐶","🐷","🐸","🐹","🐺","🐻","🐼","🐽","🐾","👀","👂","👃","👄","👅","👆","👇","👈","👉","👊","👋","👌","👍","👎","👏","👐","👑","👒","👓","👔","👕","👖","👗","👘","👙","👚","👛","👜","👝","👞","👟","👠","👡","👢","👣","👤","👦","👧","👨","👩","👪","👫","👮","👯","👰","👱","👲","👳","👴","👵","👶","👷","👸","👹","👺","👻","👼","👽","👾","👿","💀","💁","💂","💃","💄","💅","💆","💇","💈","💉","💊","💋","💌","💍","💎","💏","💐","💑","💒","💓","💔","💕","💖","💗","💘","💙","💚","💛","💜","💝","💞","💟","💠","💡","💢","💣","💤","💥","💦","💧","💨","💩","💪","💫","💬","💮","💯","💰","💱","💲","💳","💴","💵","💸","💹","💺","💻","💼","💽","💾","💿","📀","📁","📂","📃","📄","📅","📆","📇","📈","📉","📊","📋","📌","📍","📎","📏","📐","📑","📒","📓","📔","📕","📖","📗","📘","📙","📚","📛","📜","📝","📞","📟","📠","📡","📢","📣","📤","📥","📦","📧","📨","📩","📪","📫","📮","📰","📱","📲","📳","📴","📶","📷","📹","📺","📻","📼","🔃","🔊","🔋","🔌","🔍","🔎","🔏","🔐","🔑","🔒","🔓","🔔","🔖","🔗","🔘","🔙","🔚","🔛","🔜","🔝","🔞","🔟","🔠","🔡","🔢","🔣","🔤","🔥","🔦","🔧","🔨","🔩","🔪","🔫","🔮","🔯","🔰","🔱","🔲","🔳","🔴","🔵","🔶","🔷","🔸","🔹","🔺","🔻","🔼","🔽","🕐","🕑","🕒","🕓","🕔","🕕","🕖","🕗","🕘","🕙","🕚","🕛","🗻","🗼","🗽","🗾","🗿","🚁","🚂","🚆","🚈","🚊","🚍","🚎","🚐","🚔","🚖","🚘","🚛","🚜","🚝","🚞","🚟","🚠","🚡","🚣","🚦","🚮","🚯","🚰","🚱","🚳","🚴","🚵","🚷","🚸","🚿","🛁","🛂","🛃","🛄","🛅","🌍","🌎","🌐","🌒","🌖","🌗","🌘","🌚","🌜","🌝","🌞","🌲","🌳","🍋","🍐","🍼","🏇","🏉","🏤","🐀","🐁","🐂","🐃","🐄","🐅","🐆","🐇","🐈","🐉","🐊","🐋","🐏","🐐","🐓","🐕","🐖","🐪","👥","👬","👭","💭","💶","💷","📬","📭","📯","📵","🔀","🔁","🔂","🔄","🔅","🔆","🔇","🔉","🔕","🔬","🔭","🕜","🕝","🕞","🕟","🕠","🕡","🕢","🕣","🕤","🕥","🕦","🕧"]})}(window.StickersModule),function(Module){var StickerHelper=Module.StickerHelper,JsApiInterface=Module.StoreApiInterface;Module.BaseService=Module.Class({config:null,storageService:null,parseCountStat:0,parseCountWithStickerStat:0,_constructor:function(config){this.config=config,this.storageService=new Module.StorageService(this.config.storagePrefix)},parseStickerStatHandle:function(is_have){var nowDate=(new Date).getTime()/1e3|0;this.parseCountStat++,is_have&&this.parseCountWithStickerStat++,this.parseCountStat>=50&&(StickerHelper.ajaxPost(this.config.trackStatUrl,this.config.apikey,[{action:"check",category:"message",label:"Events count",time:nowDate,value:this.parseCountStat},{action:"check",category:"message",label:"Stickers count",time:nowDate,value:this.parseCountWithStickerStat}]),ga("stickerTracker.send","event","message","check","Events count",this.parseCountStat),ga("stickerTracker.send","event","message","check","Stickers count",this.parseCountWithStickerStat),this.parseCountWithStickerStat=0,this.parseCountStat=0)},addToLatestUse:function(code){this.storageService.addUsedSticker(code)},getNewStickersFlag:function(){return this.storageService.hasNewStickers()},resetNewStickersFlag:function(){return Module.DOMEventService.changeNewContentFlag(!1),this.storageService.setHasNewStickers(!1)},getLatestUse:function(){return this.storageService.getUsedStickers()},getPacksFromStorage:function(){var expireDate=+new Date,packsObj=this.storageService.getPacks();return"undefined"==typeof packsObj||packsObj.expireDate<expireDate||this.config.debug?{actual:!1,packs:"object"==typeof packsObj&&packsObj.packs?packsObj.packs:[]}:{actual:!0,packs:packsObj.packs}},markNewPacks:function(oldPacks,newPacks){var globalNew=!1;if(0!=oldPacks.length){StickerHelper.forEach(newPacks,function(newPack,key){var isNewPack=!0;StickerHelper.forEach(oldPacks,function(oldPack){newPack.pack_name==oldPack.pack_name&&(isNewPack=oldPack.newPack)}),isNewPack&&(globalNew=!0),newPacks[key].newPack=isNewPack}),0==globalNew&&0==this.getLatestUse().length&&(globalNew=!0),this.storageService.setHasNewStickers(globalNew),Module.DOMEventService.changeNewContentFlag(globalNew);for(var used=this.getLatestUse(),i=0;i<used.length;i++){for(var sticker=this.parseStickerFromText("[["+used[i].code+"]]"),pack=null,j=0;j<newPacks.length;j++)if(newPacks[j].pack_name==sticker.pack){pack=newPacks[j];break}if(null!=pack){for(var isset=!1,j=0;j<pack.stickers.length;j++)if(pack.stickers[j].name==sticker.name){isset=!0;break}isset||used.splice(i,1)}else used.splice(i,1)}this.storageService.setUsedStickers(used)}return newPacks},setPacksToStorage:function(packs){return this.storageService.setPacks(packs)},getPacksFromServer:function(callback){var options={url:this.config.clientPacksUrl,header:[]};null!==this.config.userId&&(options.url=this.config.userPacksUrl,options.header.UserId=StickerHelper.md5(this.config.userId+this.config.apikey)),StickerHelper.ajaxGet(options.url,this.config.apikey,callback,options.header)},parseStickerFromText:function(text){var outData={isSticker:!1,url:""},matchData=text.match(/\[\[(\S+)_(\S+)\]\]/);return this.parseStickerStatHandle(!!matchData),matchData&&(outData.isSticker=!0,outData.url=this.config.domain+"/"+this.config.baseFolder+"/"+matchData[1]+"/"+matchData[2]+"_"+this.config.stickerResolutionType+".png",outData.pack=matchData[1],outData.name=matchData[2]),outData},isNewPack:function(packs,packName){var isNew=!1;return StickerHelper.forEach(packs,function(pack){pack.pack_name&&pack.pack_name.toLowerCase()==packName.toLowerCase()&&(isNew=!!pack.newPack)}),isNew},onUserMessageSent:function(isSticker){var nowDate=(new Date).getTime()/1e3|0,action="send",category="message",label=isSticker?"sticker":"text";StickerHelper.ajaxPost(this.config.trackStatUrl,this.config.apikey,[{action:action,category:category,label:label,time:nowDate}]),ga("stickerTracker.send","event",category,action,label)},isExistPackInStorage:function(packName){for(var packs=this.getPacksFromStorage().packs,i=0;i<packs.length;i++)if(packs[i].pack_name==packName)return!0;return!1},updatePacks:function(successCallback){var storageStickerData;storageStickerData=this.getPacksFromStorage(),this.getPacksFromServer(function(response){if("success"==response.status){var stickerPacks=response.data;stickerPacks=this.markNewPacks(storageStickerData.packs,stickerPacks),this.setPacksToStorage(stickerPacks),successCallback&&successCallback(stickerPacks)}}.bind(this))},changeUserPackStatus:function(packName,status,callback){var options={url:this.config.userPackUrl+"/"+packName,header:{UserId:StickerHelper.md5(this.config.userId+this.config.apikey)}};StickerHelper.ajaxPost(options.url,this.config.apikey,{status:status},callback,options.header)},purchaseSuccess:function(packName){var self=this;try{var handler=function(){if(!JsApiInterface)throw new Error("JSApiInterface not found!");JsApiInterface.downloadPack(packName,function(){self.config.callbacks.onPackStoreSuccess(packName)})};null!==this.config.userId?this.changeUserPackStatus(packName,!0,handler):handler()}catch(e){console.error(e.message),this.config.callbacks.onPackStoreFail(packName)}}})}(window.StickersModule),function(Module){Module.DOMEventService={events:{resize:"resize",popoverShown:"sp.popover.shown",popoverHidden:"sp.popover.hidden",newContentFlagChange:"sp.content.change-new-flag"},_dispatch:function(eventName,eventData,el){eventName&&(eventData="undefined"!=typeof eventData?eventData:null,el=el||window,console.log(eventName),el.dispatchEvent(new CustomEvent(eventName,{detail:eventData})))},dispatch:function(eventName,eventData,el){if(eventName){eventData="undefined"!=typeof eventData?eventData:null,el=el||window;var event=document.createEvent("Events");event.initEvent(eventName,!0,!0),event.data=eventData,el.dispatchEvent(event)}},popoverShown:function(){this.dispatch(this.events.popoverShown)},popoverHidden:function(){this.dispatch(this.events.popoverHidden)},changeNewContentFlag:function(value){this.dispatch(this.events.newContentFlagChange,value)},resize:function(){this.dispatch(this.events.resize)}}}(window.StickersModule),function(Module){Module.EmojiService=Module.Class({emojiProvider:null,_constructor:function(emojiProvider){this.emojiProvider=emojiProvider},parseEmojiFromText:function(text){return this.emojiProvider.parse(text,{size:2==window.devicePixelRatio?72:36})},parseEmojiFromHtml:function(html){var content=document.createElement("div");content.innerHTML=html;for(var emojisEls=content.getElementsByClassName("emoji"),i=emojisEls.length-1;i>=0;i--){var emoji=emojisEls[i].getAttribute("alt");content.replaceChild(document.createTextNode(emoji),emojisEls[i])}return content.innerHTML}})}(window.StickersModule),function(Module){Module.StoreApiInterface=Module.Class({config:null,service:null,_constructor:function(config,service){this.config=config,this.service=service,window.addEventListener("message",function(e){if(e.data=JSON.parse(e.data),!e.data.action)try{this[e.action].apply(this,e.data.attrs)}catch(e){console.error(e.message,e)}}.bind(this))},showPackCollections:function(packName){this.config.functions.showPackCollection(packName)},downloadPack:function(packName,callback){this.service.updatePacks(function(){this.config.functions.showPackCollection(packName),callback&&callback()}.bind(this))},purchasePackInStore:function(packTitle,packProductId,packPrice,packName){this.config.callbacks.onPurchase(packTitle,packProductId,packPrice,packName)},isPackActive:function(packName){return this.isPackExistsAtUserLibrary(packName)},isPackExistsAtUserLibrary:function(packName){return this.service.isExistPackInStorage(packName)}})}(StickersModule),function(Module){Module.StorageService=Module.Class({lockr:null,_constructor:function(storagePrefix){this.lockr=Module.Lockr,this.lockr.prefix=storagePrefix},getUsedStickers:function(){return this.lockr.get("sticker_latest_use")||[]},setUsedStickers:function(usedStickers){return this.lockr.set("sticker_latest_use",usedStickers)},addUsedSticker:function(stickerCode){var usedStickers=this.getUsedStickers(),newStorageDate=[];Module.StickerHelper.forEach(usedStickers,function(usedSticker){usedSticker.code!=stickerCode&&newStorageDate.push(usedSticker)}),usedStickers=newStorageDate,usedStickers.unshift({code:stickerCode}),this.setUsedStickers(usedStickers)},hasNewStickers:function(){return this.lockr.get("sticker_have_new")},setHasNewStickers:function(value){return this.lockr.set("sticker_have_new",value)},getPacks:function(){return this.lockr.get("sticker_packs")},setPacks:function(packs){var expireDate=new Date,saveObj={packs:packs,expireDate:expireDate.setDate(expireDate.getDate()+1)};return this.lockr.set("sticker_packs",saveObj)},getUniqUserId:function(){var uniqUserId=this.lockr.get("uniqUserId");return"undefined"==typeof uniqUserId&&(uniqUserId=+new Date,this.lockr.set("uniqUserId",uniqUserId)),uniqUserId}})}(window.StickersModule),function(Module){var StickerHelper=Module.StickerHelper;Module.BlockView=Module.Class({config:null,baseService:null,emojiService:null,el:null,contentEl:null,tabsView:null,scrollView:null,_constructor:function(config,baseService,emojiService){this.config=config,this.baseService=baseService,this.emojiService=emojiService,this.el=document.getElementById(this.config.elId),this.contentEl=document.createElement("div"),this.tabsView=new Module.TabsView(this.config),this.scrollView=new Module.ScrollView,window.addEventListener("resize",function(){this.onWindowResize()}.bind(this))},clearBlock:function(el){el.setAttribute("style","display:block"),el.innerHTML=""},render:function(stickerPacks){this.tabsView.render(stickerPacks),this.el.innerHTML="",this.el.classList.add("sticker-pipe"),this.scrollView.el.setAttribute("class","sp-scroll-content"),this.scrollView.getOverview().appendChild(this.contentEl),this.contentEl.classList.add("sp-content"),this.el.appendChild(this.tabsView.el),this.el.appendChild(this.scrollView.el),this.tabsView.onWindowResize(),this.onWindowResize()},renderUsedStickers:function(latesUseSticker){if(this.clearBlock(this.contentEl),0==latesUseSticker.length)return this.contentEl.innerHTML+=this.config.htmlForEmptyRecent,!1;var stickers=[];StickerHelper.forEach(latesUseSticker,function(sticker){stickers.push(sticker.code)}),this.renderStickers(stickers)},renderEmojiBlock:function(){this.clearBlock(this.contentEl),this.contentEl.classList.remove("sp-stickers"),this.contentEl.classList.add("sp-emojis"),StickerHelper.forEach(this.config.emojiList,function(emoji){var emojiEl=document.createElement("span"),emojiImgHtml=this.emojiService.parseEmojiFromText(emoji);emojiEl.className=this.config.emojiItemClass,emojiEl.innerHTML=emojiImgHtml,this.contentEl.appendChild(emojiEl)}.bind(this)),this.scrollView.update()},renderPack:function(pack){this.clearBlock(this.contentEl);var stickers=[];StickerHelper.forEach(pack.stickers,function(sticker){stickers.push(pack.pack_name+"_"+sticker.name)}),this.renderStickers(stickers)},renderStickers:function(stickers){var self=this;this.contentEl.classList.remove("sp-emojis"),this.contentEl.classList.add("sp-stickers"),StickerHelper.forEach(stickers,function(stickerCode){var placeHolderClass="sp-sticker-placeholder",stickerImgSrc=self.baseService.parseStickerFromText("[["+stickerCode+"]]"),stickersSpanEl=document.createElement("span");stickersSpanEl.classList.add(placeHolderClass);var image=new Image;image.onload=function(){stickersSpanEl.classList.remove(placeHolderClass),stickersSpanEl.classList.add(self.config.stickerItemClass),stickersSpanEl.setAttribute("data-sticker-string",stickerCode),stickersSpanEl.appendChild(image)},image.onerror=function(){},image.src=stickerImgSrc.url,self.contentEl.appendChild(stickersSpanEl)}),this.scrollView.update()},handleClickSticker:function(callback){Module.StickerHelper.setEvent("click",this.contentEl,this.config.stickerItemClass,callback)},handleClickEmoji:function(callback){Module.StickerHelper.setEvent("click",this.contentEl,this.config.emojiItemClass,callback)},onWindowResize:function(){}})}(window.StickersModule),function(Module){var parent=Module.BlockView;Module.PopoverView=Module.Class(parent,{popoverEl:null,arrowEl:null,toggleEl:null,active:!1,_constructor:function(){parent.prototype._constructor.apply(this,arguments),this.toggleEl=document.getElementById(this.config.elId),this.toggleEl.addEventListener("click",function(){this.toggle()}.bind(this)),this.popoverEl=document.createElement("div"),this.popoverEl.classList.add("sp-popover"),this.el=document.createElement("div"),this.arrowEl=document.createElement("div"),this.arrowEl.className="sp-arrow",this.popoverEl.appendChild(this.el),this.popoverEl.appendChild(this.arrowEl),this.handleClickSticker(function(){this.toggle()}.bind(this)),document.getElementsByTagName("body")[0].addEventListener("click",function(e){function isDescendant(parent,child){for(var node=child.parentNode;null!=node;){if(node==parent)return!0;node=node.parentNode}return!1}this.active&&(isDescendant(this.popoverEl,e.target)||isDescendant(this.toggleEl.parentElement,e.target)||this.toggle())}.bind(this)),window.addEventListener(Module.DOMEventService.events.popoverShown,function(){Module.DOMEventService.resize()})},toggle:function(){this.active=!this.active,this.active?(this.toggleEl.parentElement.appendChild(this.popoverEl),this.positioned(),Module.DOMEventService.popoverShown()):(this.toggleEl.parentElement.removeChild(this.popoverEl),Module.DOMEventService.popoverHidden())},positioned:function(){if(this.arrowEl){var style=this.toggleEl.currentStyle||window.getComputedStyle(this.toggleEl),marginLeft=parseInt(style.marginLeft,10);this.arrowEl.style.marginLeft=this.toggleEl.clientWidth/2-this.arrowEl.offsetWidth/2+marginLeft+"px"}else console.error("error");this.popoverEl.style.top=-(this.popoverEl.offsetHeight+15)+"px"}})}(window.StickersModule),function(Module){Module.ScrollView=Module.Class({el:null,scrollbarEl:null,trackEl:null,thumbEl:null,viewportEl:null,overviewEl:null,scrollbar:null,_constructor:function(){this.el=document.createElement("div"),this.scrollbarEl=document.createElement("div"),this.trackEl=document.createElement("div"),this.thumbEl=document.createElement("div"),this.viewportEl=document.createElement("div"),this.overviewEl=document.createElement("div"),this.scrollbarEl.className="scrollbar",this.trackEl.className="track",this.thumbEl.className="thumb",this.viewportEl.className="viewport",this.overviewEl.className="overview",this.trackEl.appendChild(this.thumbEl),this.scrollbarEl.appendChild(this.trackEl),this.viewportEl.appendChild(this.overviewEl),this.el.appendChild(this.scrollbarEl),this.el.appendChild(this.viewportEl),this.scrollbar=Module.Tinyscrollbar(this.el),window.addEventListener("resize",function(){this.update()}.bind(this))},getOverview:function(){return this.overviewEl},update:function(){this.scrollbar.update()}})}(window.StickersModule),function(Module){Module.StoreView=Module.Class({config:null,el:null,_constructor:function(config){this.config=config,this.el=document.getElementById(this.config.storeContainerId)},render:function(packName){var iframe=document.createElement("iframe"),urlParams={apiKey:this.config.apikey,platform:"JS",userId:this.config.userId,density:this.config.stickerResolutionType,uri:encodeURIComponent("http://demo.stickerpipe.com/work/libs/store/js/stickerPipeStore.js")},urlSerialize=function(obj){var str=[];for(var p in obj)obj.hasOwnProperty(p)&&str.push(encodeURIComponent(p)+"="+encodeURIComponent(obj[p]));return str.join("&")};this.el.classList.add("sp-store"),this.el.innerHTML="",this.el.appendChild(iframe),iframe.style.width="100%",iframe.style.height="100%",iframe.style.border="0",iframe.src=this.config.storeUrl+"?"+urlSerialize(urlParams)+"#/packs/"+packName}})}(window.StickersModule),function(Module){Module.TabsView=Module.Class({el:null,scrollableContainerEl:null,scrollableContentEl:null,controls:null,packTabs:{},classes:{scrollableContainer:"sp-tabs-scrollable-container",scrollableContent:"sp-tabs-scrollable-content",controlTab:"sp-control-tab",controlButton:"sp-control-button",newPack:"sp-new-pack",packTab:"sp-pack-tab",tabActive:"sp-tab-active",tabs:"sp-tabs"},config:null,_constructor:function(config){this.config=config,this.el=document.createElement("div"),this.controls={emoji:{id:"spTabEmoji","class":"sp-tab-emoji",content:this.config.emojiTabContent,el:null,isTab:!0},history:{id:"spTabHistory","class":"sp-tab-history",content:this.config.historyTabContent,el:null,isTab:!0},settings:{id:"spTabSettings","class":"sp-tab-settings",content:this.config.settingsTabContent,el:null,isTab:!1},store:{id:"spTabStore","class":"sp-tab-store",content:this.config.storeTabContent,el:null,isTab:!1},prevPacks:{id:"spTabPrevPacks","class":"sp-tab-prev-packs",content:this.config.prevPacksTabContent,el:null,isTab:!1},nextPacks:{id:"spTabNextPacks","class":"sp-tab-next-packs",content:this.config.nextPacksTabContent,el:null,isTab:!1}},window.addEventListener("resize",function(){this.onWindowResize()}.bind(this))},render:function(stickerPacks){this.el.classList.add(this.classes.tabs),this.el.innerHTML="",this.renderPrevPacksTab(),this.renderScrollableContainer(),this.renderPacks(stickerPacks),this.renderNextPacksTab(),this.renderStoreTab()},renderScrollableContainer:function(){this.scrollableContentEl=document.createElement("div"),this.scrollableContentEl.className=this.classes.scrollableContent,this.scrollableContainerEl=document.createElement("div"),this.scrollableContainerEl.className=this.classes.scrollableContainer,this.scrollableContainerEl.appendChild(this.scrollableContentEl),this.el.appendChild(this.scrollableContainerEl)},renderControlButton:function(controlButton){controlButton.isTab=controlButton.isTab||!1;var classes=[controlButton["class"]];return classes.push(controlButton.isTab?this.classes.controlTab:this.classes.controlButton),controlButton.el=this.renderTab(controlButton.id,classes,controlButton.content),controlButton.el},renderPackTab:function(pack){var classes=[this.classes.packTab];pack.newPack&&classes.push(this.classes.newPack);var iconSrc=this.config.domain+"/"+this.config.baseFolder+"/"+pack.pack_name+"/tab_icon_"+this.config.tabResolutionType+".png",content="<img src="+iconSrc+">",tabEl=this.renderTab(null,classes,content,{"data-pack-name":pack.pack_name});return tabEl.addEventListener("click",function(){tabEl.classList.remove(this.classes.newPack)}.bind(this)),this.packTabs[pack.pack_name]=tabEl,tabEl},renderTab:function(id,classes,content,attrs){classes=classes||[],attrs=attrs||{};var tabEl=document.createElement("span");return id&&(tabEl.id=id),classes.push(this.config.tabItemClass),tabEl.classList.add.apply(tabEl.classList,classes),Module.StickerHelper.forEach(attrs,function(value,name){tabEl.setAttribute(name,value)}),tabEl.innerHTML=content,tabEl.addEventListener("click",function(){(tabEl.classList.contains(this.classes.controlTab)||tabEl.classList.contains(this.classes.packTab))&&(Module.StickerHelper.forEach(this.packTabs,function(tabEl){tabEl.classList.remove(this.classes.tabActive)}.bind(this)),Module.StickerHelper.forEach(this.controls,function(controlTab){controlTab&&controlTab.el&&controlTab.el.classList.remove(this.classes.tabActive)}.bind(this)),tabEl.classList.add(this.classes.tabActive))}.bind(this)),tabEl},renderPacks:function(stickerPacks){this.scrollableContentEl.innerHTML="",this.renderEmojiTab(),this.renderHistoryTab();for(var i=0;i<stickerPacks.length;i++)this.scrollableContentEl.appendChild(this.renderPackTab(stickerPacks[i],i));this.renderSettingsTab()},renderEmojiTab:function(){this.config.enableEmojiTab&&this.scrollableContentEl.appendChild(this.renderControlButton(this.controls.emoji))},renderHistoryTab:function(){this.config.enableHistoryTab&&this.scrollableContentEl.appendChild(this.renderControlButton(this.controls.history))},renderSettingsTab:function(){this.config.enableSettingsTab&&this.scrollableContentEl.appendChild(this.renderControlButton(this.controls.settings))},renderStoreTab:function(){this.config.enableStoreTab&&this.el.appendChild(this.renderControlButton(this.controls.store))},renderPrevPacksTab:function(){this.el.appendChild(this.renderControlButton(this.controls.prevPacks)),Module.StickerHelper.setEvent("click",this.el,this.controls.prevPacks["class"],this.onClickPrevPacksButton.bind(this))},renderNextPacksTab:function(){this.el.appendChild(this.renderControlButton(this.controls.nextPacks)),Module.StickerHelper.setEvent("click",this.el,this.controls.nextPacks["class"],this.onClickNextPacksButton.bind(this))},onClickPrevPacksButton:function(){var tabWidth=this.scrollableContentEl.getElementsByClassName(this.classes.packTab)[0].offsetWidth,containerWidth=this.scrollableContainerEl.offsetWidth,contentOffset=parseInt(this.scrollableContentEl.style.left,10)||0,countFullShownTabs=parseInt(containerWidth/tabWidth,10),offset=contentOffset+tabWidth*countFullShownTabs;offset=offset>0?0:offset,this.scrollableContentEl.style.left=offset+"px",this.onWindowResize()},onClickNextPacksButton:function(){var tabWidth=this.scrollableContentEl.getElementsByClassName(this.classes.packTab)[0].offsetWidth,containerWidth=this.scrollableContainerEl.offsetWidth,contentOffset=parseInt(this.scrollableContentEl.style.left,10)||0,countFullShownTabs=parseInt(containerWidth/tabWidth,10),offset=-(tabWidth*countFullShownTabs)+contentOffset;this.scrollableContentEl.style.left=offset+"px",this.onWindowResize()},handleClickOnEmojiTab:function(callback){Module.StickerHelper.setEvent("click",this.el,this.controls.emoji["class"],callback)},handleClickOnLastUsedPacksTab:function(callback){Module.StickerHelper.setEvent("click",this.el,this.controls.history["class"],callback)},handleClickOnPackTab:function(callback){Module.StickerHelper.setEvent("click",this.el,this.classes.packTab,callback)},onWindowResize:function(){if(this.el.parentElement&&(this.controls.prevPacks.el&&(parseInt(this.scrollableContentEl.style.left,10)<0?this.controls.prevPacks.el.style.display="block":this.controls.prevPacks.el.style.display="none"),this.controls.nextPacks.el)){var contentWidth=this.scrollableContentEl.scrollWidth,contentOffset=parseInt(this.scrollableContentEl.style.left,10)||0;contentWidth+contentOffset>this.scrollableContainerEl.offsetWidth?this.controls.nextPacks.el.style.display="block":this.controls.nextPacks.el.style.display="none"}}})}(window.StickersModule),function(Plugin,Module){var helper=Module.StickerHelper;Plugin.Stickers=Module.Class({config:null,baseService:null,emojiService:null,stickersModel:{},view:null,storeView:null,_constructor:function(config){Module.Configs.add(config),this.config=Module.Configs.getAll(),this.configResolution(),this.baseService=new Module.BaseService(this.config),this.emojiService=new Module.EmojiService(Module.Twemoji),this.view=new Module.PopoverView(this.config,this.baseService,this.emojiService),this.storeView=new Module.StoreView(this.config),Plugin.JsApiInterface&&Plugin.JsApiInterface._setConfigs(this.config),this.delegateEvents();var callback=this.config.onload||null,onPacksLoadCallback=function(){callback&&callback(),this.view.render(this.stickersModel),this.view.renderUsedStickers(this.baseService.getLatestUse())}.bind(this),storageStickerData=this.baseService.getPacksFromStorage();storageStickerData.actual?(this.stickersModel=storageStickerData.packs,onPacksLoadCallback.apply()):this.fetchPacks({callback:onPacksLoadCallback})},delegateEvents:function(){this.view.tabsView.handleClickOnEmojiTab(function(){this.view.renderEmojiBlock()}.bind(this)),this.view.tabsView.handleClickOnLastUsedPacksTab(function(){this.view.renderUsedStickers(this.baseService.getLatestUse())}.bind(this)),this.view.tabsView.handleClickOnPackTab(function(el){for(var pack=null,packName=el.getAttribute("data-pack-name"),changed=!1,hasNewContent=!1,i=0;i<this.stickersModel.length;i++)this.stickersModel[i].pack_name==packName&&(changed=!0,this.stickersModel[i].newPack=!1,this.baseService.setPacksToStorage(this.stickersModel),pack=this.stickersModel[i]),1==this.stickersModel[i].newPack&&(hasNewContent=!0);1==changed&&0!=this.baseService.getLatestUse().length&&0==hasNewContent&&this.resetNewStickersFlag(),pack&&this.view.renderPack(pack)}.bind(this)),this.view.handleClickSticker(function(el){var stickerAttribute=el.getAttribute("data-sticker-string"),nowDate=(new Date).getTime()/1e3|0;helper.ajaxPost(this.config.trackStatUrl,this.config.apikey,[{action:"use",category:"sticker",label:"[["+stickerAttribute+"]]",time:nowDate}]),ga("stickerTracker.send","event","sticker",stickerAttribute.split("_")[0],stickerAttribute.split("_")[1],1),this.baseService.addToLatestUse(stickerAttribute);for(var hasNewContent=!1,i=0;i<this.stickersModel.length;i++)if(1==this.stickersModel[i].newPack){hasNewContent=!0;break}0!=this.baseService.getLatestUse().length&&0==hasNewContent&&this.resetNewStickersFlag()}.bind(this)),this.view.handleClickEmoji(function(el){var nowDate=(new Date).getTime()/1e3|0,emoji=this.emojiService.parseEmojiFromHtml(el.innerHTML);helper.ajaxPost(this.config.trackStatUrl,this.config.apikey,[{action:"use",category:"emoji",label:emoji,time:nowDate}]),ga("stickerTracker.send","event","emoji","use",emoji)}.bind(this))},configResolution:function(){this.config=helper.mergeOptions(this.config,{stickerResolutionType:"mdpi",tabResolutionType:"hdpi"}),2==window.devicePixelRatio&&(this.config=helper.mergeOptions(this.config,{stickerResolutionType:"xhdpi",tabResolutionType:"xxhdpi"}))},fetchPacks:function(attrs){this.baseService.updatePacks(function(stickerPacks){this.stickersModel=stickerPacks,attrs.callback&&attrs.callback.apply()}.bind(this))},onClickSticker:function(callback,context){this.view.handleClickSticker(function(el){callback.call(context,"[["+el.getAttribute("data-sticker-string")+"]]")})},onClickTab:function(callback,context){this.view.tabsView.handleClickOnPackTab(function(el){callback.call(context,el)})},onClickEmoji:function(callback,context){this.view.handleClickEmoji(function(el){var emoji=this.emojiService.parseEmojiFromHtml(el.innerHTML);callback.call(context,emoji)}.bind(this))},getNewStickersFlag:function(){return this.baseService.getNewStickersFlag(this.baseService.getPacksFromStorage().packs||[])},resetNewStickersFlag:function(){return this.baseService.resetNewStickersFlag()},parseStickerFromText:function(text){return this.baseService.parseStickerFromText(text)},parseEmojiFromText:function(text){return this.emojiService.parseEmojiFromText(text)},parseEmojiFromHtml:function(html){return this.emojiService.parseEmojiFromHtml(html);
},renderCurrentTab:function(tabName){var obj=this.baseService.getPacksFromStorage();helper.forEach(obj.packs,function(pack,key){pack.pack_name.toLowerCase()==tabName.toLowerCase()&&(this.tabActive=+key)}.bind(this))},isNewPack:function(packName){return this.baseService.isNewPack(this.stickersModel,packName)},onUserMessageSent:function(isSticker){return this.baseService.onUserMessageSent(isSticker)},renderPack:function(pack){this.storeView.render(pack)},purchaseSuccess:function(packName){this.baseService.purchaseSuccess(packName)}})}(window,window.StickersModule);