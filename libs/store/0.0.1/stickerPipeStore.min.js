var appStickerPipeStore=angular.module("appStickerPipeStore",["ngRoute","angular-google-analytics","partials"]);appStickerPipeStore.factory("$exceptionHandler",function(t){return function(e,n){var r=t.get("$log");e=e||{},e.message+=' (caused by "'+n+'")';e.message||"",e.stack||"";!navigator.userAgent.match("Opera Mini"),r.error(e)}}),appStickerPipeStore.factory("Http",["$http","$q","Config",function(t,e,n){var r={};return t.defaults.headers.post.Accept="*/*",t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",t.defaults.headers.common.Apikey=n.apiKey,t.defaults.headers.common.Platform=n.platform,t.defaults.headers.common.UserId=n.userId,r.post=function(n,r){var i=e.defer();return r=Object.keys(r).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(r[t])}).join("&"),t({method:"POST",url:n,data:r,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).success(function(t){i.resolve(t)}).error(function(t,e){i.reject(t)}),i.promise},r.put=function(n,r){var i=e.defer();return r=$.param(r),t({method:"PUT",url:n,data:r,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).success(function(t){i.resolve(t)}).error(function(t,e){i.reject(t)}),i.promise},r.get=function(n,r){var i=e.defer();return r=r||{},n+="?",angular.forEach(r,function(t,e){n+=e+"="+t+"&"}),("&"===n[n.length-1]||"?"===n[n.length-1])&&(n=n.slice(0,-1)),t.get(n,{headers:{"X-Requested-With":"XMLHttpRequest"}}).success(function(t){i.resolve(t)}).error(function(t,e){i.reject(t)}),i.promise},r}]),appStickerPipeStore.factory("HttpApi",["Http","$q",function(t){var e=1,n=function(t){return"http://work.stk.908.vc/api/v"+e+t};return angular.extend({},{getPack:function(e){return t.get(n("/pack/"+e)).then(function(t){return t.data||t})},changePackStatus:function(e,r){return t.post(n("/user/pack/"+e),{status:r})}})}]),appStickerPipeStore.factory("PlatformAPI",["Config","$injector",function(t,e){var n={};switch(t.platform.toLowerCase()){case"android":n=e.get("AndroidPlatform")}return angular.extend({},{showPackCollections:function(t){return n.showPackCollections()},downloadPack:function(t){return n.downloadPack(t.pack_name)},purchasePackInStore:function(t){return n.purchasePackInStore(t.title,t.product_id,t.price)},purchasePackInPlatformStore:function(t){return n.purchasePackInPlatformStore(t.product_id)},isPackActive:function(t){return n.isPackActive(t.pack_name)},getProductPrice:function(t){return n.getProductPrice(t.product_id)},isPackExistsAtUserLibrary:function(t){return n.isPackExistsAtUserLibrary(t.pack_name)}})}]),!function(t,e,n,r){"use strict";n.module("angular-google-analytics",[]).provider("Analytics",function(){var i,a,c,o,s,u=!0,l="auto",p=!1,d=!1,f="USD",h=!1,m=!1,k=!1,g=!1,v=!1,y=!1,P=!1,_=!1,w=!1,S="$routeChangeSuccess",E=!1,C="",$=!0,T=!1;this.log=[],this.offlineQueue=[],this.setAccount=function(t){return i=n.isUndefined(t)||t===!1?r:n.isArray(t)?t:n.isObject(t)?[t]:[{tracker:t,trackEvent:!0}],this},this.trackPages=function(t){return $=t,this},this.trackPrefix=function(t){return C=t,this},this.setDomainName=function(t){return c=t,this},this.useDisplayFeatures=function(t){return m=!!t,this},this.useAnalytics=function(t){return u=!!t,this},this.useEnhancedLinkAttribution=function(t){return v=!!t,this},this.useCrossDomainLinker=function(t){return d=!!t,this},this.setCrossLinkDomains=function(t){return a=t,this},this.setPageEvent=function(t){return S=t,this},this.setCookieConfig=function(t){return l=t,this},this.useECommerce=function(t,e){return k=!!t,g=!!e,this},this.setCurrency=function(t){return f=t,this},this.setRemoveRegExp=function(t){return t instanceof RegExp&&(s=t),this},this.setExperimentId=function(t){return o=t,this},this.ignoreFirstPageLoad=function(t){return y=!!t,this},this.trackUrlParams=function(t){return T=!!t,this},this.setHybridMobileSupport=function(t){return _=!!t,this},this.startOffline=function(t){return w=!!t,w===!0&&this.delayScriptTag(!0),this},this.delayScriptTag=function(t){return h=!!t,this},this.logAllCalls=function(t){return P=!!t,this},this.enterTestMode=function(){return E=!0,this},this.$get=["$document","$location","$log","$rootScope","$window",function(b,A,x,U,I){var D=this,j=function(t,e){return n.isString(e)?e+"."+t:L("name",e)?e.name+"."+t:t},L=function(t,e){return n.isObject(e)&&n.isDefined(e[t])},B=function(t,e,n){return L(t,e)&&e[t]===n},O=function(){var t=T?A.url():A.path();return s?t.replace(s,""):t},q=function(){var t={utm_source:"campaignSource",utm_medium:"campaignMedium",utm_term:"campaignTerm",utm_content:"campaignContent",utm_campaign:"campaignName"},e={};return n.forEach(A.search(),function(r,i){var a=t[i];n.isDefined(a)&&(e[a]=r)}),e},R=function(t,e,n,r,i,a,c,o,s){var u={};return t&&(u.id=t),e&&(u.affiliation=e),n&&(u.revenue=n),r&&(u.tax=r),i&&(u.shipping=i),a&&(u.coupon=a),c&&(u.list=c),o&&(u.step=o),s&&(u.option=s),u},N=function(t){!u&&I._gaq&&"function"==typeof t&&t()},M=function(){var t=Array.prototype.slice.call(arguments);return w===!0?void D.offlineQueue.push([M,t]):(I._gaq||(I._gaq=[]),P===!0&&D._log.apply(D,t),void I._gaq.push(t))},H=function(t){u&&I.ga&&"function"==typeof t&&t()},V=function(){var t=Array.prototype.slice.call(arguments);return w===!0?void D.offlineQueue.push([V,t]):"function"!=typeof I.ga?void D._log("warn","ga function not set on window"):(P===!0&&D._log.apply(D,t),void I.ga.apply(null,t))},F=function(t){var e=Array.prototype.slice.call(arguments,1),n=e[0],r=[];return"function"==typeof t?i.forEach(function(e){t(e)&&r.push(e)}):r=i,0===r.length?void V.apply(D,e):void r.forEach(function(t){e[0]=j(n,t),V.apply(D,e)})};return this._log=function(){var t=Array.prototype.slice.call(arguments);if(t.length>0){if(t.length>1)switch(t[0]){case"debug":case"error":case"info":case"log":case"warn":x[t[0]](t.slice(1))}D.log.push(t)}},this._createScriptTag=function(){if(!i||i.length<1)return void D._log("warn","No account id set to create script tag");if(i.length>1&&(D._log("warn","Multiple trackers are not supported with ga.js. Using first tracker only"),i=i.slice(0,1)),p===!0)return void D._log("warn","ga.js or analytics.js script tag already created");M("_setAccount",i[0].tracker),c&&M("_setDomainName",c),v&&M("_require","inpage_linkid","//www.google-analytics.com/plugins/ga/inpage_linkid.js"),$&&!y&&(s?M("_trackPageview",O()):M("_trackPageview"));var t;return t=m===!0?("https:"===e.location.protocol?"https://":"http://")+"stats.g.doubleclick.net/dc.js":("https:"===e.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",E!==!0?!function(){var e=b[0],n=e.createElement("script");n.type="text/javascript",n.async=!0,n.src=t;var r=e.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)}():D._log("inject",t),p=!0,!0},this._createAnalyticsScriptTag=function(){if(!i)return void D._log("warn","No account id set to create analytics script tag");if(p===!0)return void D._log("warn","ga.js or analytics.js script tag already created");var r=_===!0?"https:":"",c=r+"//www.google-analytics.com/analytics.js";if(E!==!0?!function(t,e,n,r,i,a,c){t.GoogleAnalyticsObject=i,t[i]=t[i]||function(){(t[i].q=t[i].q||[]).push(arguments)},t[i].l=1*new Date,a=e.createElement(n),c=e.getElementsByTagName(n)[0],a.async=1,a.src=r,c.parentNode.insertBefore(a,c)}(t,e,"script",c,"ga"):("function"!=typeof I.ga&&(I.ga=function(){}),D._log("inject",c)),i.forEach(function(t){t.crossDomainLinker=L("crossDomainLinker",t)?t.crossDomainLinker:d,t.crossLinkDomains=L("crossLinkDomains",t)?t.crossLinkDomains:a,t.displayFeatures=L("displayFeatures",t)?t.displayFeatures:m,t.enhancedLinkAttribution=L("enhancedLinkAttribution",t)?t.enhancedLinkAttribution:v,t.trackEcommerce=L("trackEcommerce",t)?t.trackEcommerce:k,t.trackEvent=L("trackEvent",t)?t.trackEvent:!1;var e={};L("fields",t)?e=t.fields:L("cookieConfig",t)?n.isString(t.cookieConfig)?e.cookieDomain=t.cookieConfig:e=t.cookieConfig:n.isString(l)?e.cookieDomain=l:l&&(e=l),t.crossDomainLinker===!0&&(e.allowLinker=!0),L("name",t)&&(e.name=t.name),t.fields=e,V("create",t.tracker,t.fields),_===!0&&V(j("set",t),"checkProtocolTask",null),t.crossDomainLinker===!0&&(V(j("require",t),"linker"),n.isDefined(t.crossLinkDomains)&&V(j("linker:autoLink",t),t.crossLinkDomains)),t.displayFeatures&&V(j("require",t),"displayfeatures"),t.trackEcommerce&&(g?(V(j("require",t),"ec"),V(j("set",t),"&cu",f)):V(j("require",t),"ecommerce")),t.enhancedLinkAttribution&&V(j("require",t),"linkid"),$&&!y&&V(j("send",t),"pageview",O())}),o){var s=e.createElement("script"),u=e.getElementsByTagName("script")[0];s.src=r+"//www.google-analytics.com/cx/api.js?experiment="+o,u.parentNode.insertBefore(s,u)}return p=!0,!0},this._ecommerceEnabled=function(t,e){var n=k&&!g;return t===!0&&n===!1&&(k&&g?D._log("warn",e+" is not available when Enhanced Ecommerce is enabled with analytics.js"):D._log("warn","Ecommerce must be enabled to use "+e+" with analytics.js")),n},this._enhancedEcommerceEnabled=function(t,e){var n=k&&g;return t===!0&&n===!1&&D._log("warn","Enhanced Ecommerce must be enabled to use "+e+" with analytics.js"),n},this._trackPage=function(t,e,i){t=t?t:O(),e=e?e:b[0].title,N(function(){M("_set","title",e),M("_trackPageview",C+t)}),H(function(){var a={page:C+t,title:e};n.extend(a,q()),n.isObject(i)&&n.extend(a,i),F(r,"send","pageview",a)})},this._trackEvent=function(t,e,r,i,a,c){N(function(){M("_trackEvent",t,e,r,i,!!a)}),H(function(){var o={},s=function(t){return B("trackEvent",t,!0)};n.isDefined(a)&&(o.nonInteraction=!!a),n.isObject(c)&&n.extend(o,c),F(s,"send","event",t,e,r,i,o)})},this._addTrans=function(t,e,n,r,i,a,c,o,s){N(function(){M("_addTrans",t,e,n,r,i,a,c,o)}),H(function(){if(D._ecommerceEnabled(!0,"addTrans")){var a=function(t){return B("trackEcommerce",t,!0)};F(a,"ecommerce:addTransaction",{id:t,affiliation:e,revenue:n,tax:r,shipping:i,currency:s||"USD"})}})},this._addItem=function(t,e,n,r,i,a){N(function(){M("_addItem",t,e,n,r,i,a)}),H(function(){if(D._ecommerceEnabled(!0,"addItem")){var c=function(t){return B("trackEcommerce",t,!0)};F(c,"ecommerce:addItem",{id:t,name:n,sku:e,category:r,price:i,quantity:a})}})},this._trackTrans=function(){N(function(){M("_trackTrans")}),H(function(){if(D._ecommerceEnabled(!0,"trackTrans")){var t=function(t){return B("trackEcommerce",t,!0)};F(t,"ecommerce:send")}})},this._clearTrans=function(){H(function(){if(D._ecommerceEnabled(!0,"clearTrans")){var t=function(t){return B("trackEcommerce",t,!0)};F(t,"ecommerce:clear")}})},this._addProduct=function(t,e,r,i,a,c,o,s,u,l){N(function(){M("_addProduct",t,e,r,i,a,c,o,s,u)}),H(function(){if(D._enhancedEcommerceEnabled(!0,"addProduct")){var p=function(t){return B("trackEcommerce",t,!0)},d={id:t,name:e,category:r,brand:i,variant:a,price:c,quantity:o,coupon:s,position:u};n.isObject(l)&&n.extend(d,l),F(p,"ec:addProduct",d)}})},this._addImpression=function(t,e,n,r,i,a,c,o){N(function(){M("_addImpression",t,e,n,r,i,a,c,o)}),H(function(){if(D._enhancedEcommerceEnabled(!0,"addImpression")){var s=function(t){return B("trackEcommerce",t,!0)};F(s,"ec:addImpression",{id:t,name:e,category:i,brand:r,variant:a,list:n,position:c,price:o})}})},this._addPromo=function(t,e,n,r){N(function(){M("_addPromo",t,e,n,r)}),H(function(){if(D._enhancedEcommerceEnabled(!0,"addPromo")){var i=function(t){return B("trackEcommerce",t,!0)};F(i,"ec:addPromo",{id:t,name:e,creative:n,position:r})}})},this._setAction=function(t,e){N(function(){M("_setAction",t,e)}),H(function(){if(D._enhancedEcommerceEnabled(!0,"setAction")){var n=function(t){return B("trackEcommerce",t,!0)};F(n,"ec:setAction",t,e)}})},this._trackTransaction=function(t,e,n,r,i,a,c,o,s){this._setAction("purchase",R(t,e,n,r,i,a,c,o,s))},this._trackRefund=function(t){this._setAction("refund",R(t))},this._trackCheckOut=function(t,e){this._setAction("checkout",R(null,null,null,null,null,null,null,t,e))},this._trackDetail=function(){this._setAction("detail"),this._pageView()},this._trackCart=function(t){-1!==["add","remove"].indexOf(t)&&(this._setAction(t),this._trackEvent("UX","click",t+("add"===t?" to cart":" from cart")))},this._promoClick=function(t){this._setAction("promo_click"),this._trackEvent("Internal Promotions","click",t)},this._productClick=function(t){this._setAction("click",R(null,null,null,null,null,null,t,null,null)),this._trackEvent("UX","click",t)},this._pageView=function(t){H(function(){V(j("send",t),"pageview")})},this._send=function(){var t=Array.prototype.slice.call(arguments);t.unshift("send"),H(function(){V.apply(D,t)})},this._set=function(t,e,n){H(function(){V(j("set",n),t,e)})},this._trackTimings=function(t,e,n,r){this._send("timing",t,e,n,r)},h||(u?this._createAnalyticsScriptTag():this._createScriptTag()),$&&U.$on(S,function(){D._trackPage()}),{log:D.log,offlineQueue:D.offlineQueue,configuration:{accounts:i,universalAnalytics:u,crossDomainLinker:d,crossLinkDomains:a,currency:f,delayScriptTag:h,displayFeatures:m,domainName:c,ecommerce:D._ecommerceEnabled(),enhancedEcommerce:D._enhancedEcommerceEnabled(),enhancedLinkAttribution:v,experimentId:o,hybridMobileSupport:_,ignoreFirstPageLoad:y,logAllCalls:P,pageEvent:S,removeRegExp:s,testMode:E,trackPrefix:C,trackRoutes:$,trackUrlParams:T},getUrl:O,setCookieConfig:D._setCookieConfig,getCookieConfig:function(){return l},createAnalyticsScriptTag:function(t){return t&&(l=t),D._createAnalyticsScriptTag()},createScriptTag:function(){return D._createScriptTag()},offline:function(t){if(t===!0&&w===!1&&(w=!0),t===!1&&w===!0)for(w=!1;D.offlineQueue.length>0;){var e=D.offlineQueue.shift();e[0].apply(D,e[1])}return w},trackPage:function(t,e,n){D._trackPage.apply(D,arguments)},trackEvent:function(t,e,n,r,i,a){D._trackEvent.apply(D,arguments)},addTrans:function(t,e,n,r,i,a,c,o,s){D._addTrans.apply(D,arguments)},addItem:function(t,e,n,r,i,a){D._addItem.apply(D,arguments)},trackTrans:function(){D._trackTrans.apply(D,arguments)},clearTrans:function(){D._clearTrans.apply(D,arguments)},addProduct:function(t,e,n,r,i,a,c,o,s,u){D._addProduct.apply(D,arguments)},addPromo:function(t,e,n,r){D._addPromo.apply(D,arguments)},addImpression:function(t,e,n,r,i,a,c,o){D._addImpression.apply(D,arguments)},productClick:function(t){D._productClick.apply(D,arguments)},promoClick:function(t){D._promoClick.apply(D,arguments)},trackDetail:function(){D._trackDetail.apply(D,arguments)},trackCart:function(t){D._trackCart.apply(D,arguments)},trackCheckout:function(t,e){D._trackCheckOut.apply(D,arguments)},trackTimings:function(t,e,n,r){D._trackTimings.apply(D,arguments)},trackTransaction:function(t,e,n,r,i,a,c,o,s){D._trackTransaction.apply(D,arguments)},setAction:function(t,e){D._setAction.apply(D,arguments)},pageView:function(){D._pageView.apply(D,arguments)},send:function(t){D._send.apply(D,arguments)},set:function(t,e,n){D._set.apply(D,arguments)}}}]}).directive("gaTrackEvent",["Analytics","$parse",function(t,e){return{restrict:"A",link:function(n,r,i){var a=e(i.gaTrackEvent);r.bind("click",function(){(!i.gaTrackEventIf||n.$eval(i.gaTrackEventIf))&&a.length>1&&t.trackEvent.apply(t,a(n))})}}}])}(window,document,window.angular),function(t,e,n){"use strict";function r(t,n,r){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(i,a,c,o,s){function u(){f&&(r.cancel(f),f=null),p&&(p.$destroy(),p=null),d&&(f=r.leave(d),f.then(function(){f=null}),d=null)}function l(){var c=t.current&&t.current.locals;if(e.isDefined(c&&c.$template)){var c=i.$new(),o=t.current;d=s(c,function(t){r.enter(t,null,d||a).then(function(){!e.isDefined(h)||h&&!i.$eval(h)||n()}),u()}),p=o.scope=c,p.$emit("$viewContentLoaded"),p.$eval(m)}else u()}var p,d,f,h=c.autoscroll,m=c.onload||"";i.$on("$routeChangeSuccess",l),l()}}}function i(t,e,n){return{restrict:"ECA",priority:-400,link:function(r,i){var a=n.current,c=a.locals;i.html(c.$template);var o=t(i.contents());a.controller&&(c.$scope=r,c=e(a.controller,c),a.controllerAs&&(r[a.controllerAs]=c),i.data("$ngControllerController",c),i.children().data("$ngControllerController",c)),o(r)}}}t=e.module("ngRoute",["ng"]).provider("$route",function(){function t(t,n){return e.extend(Object.create(t),n)}function n(t,e){var n=e.caseInsensitiveMatch,r={originalPath:t,regexp:t},i=r.keys=[];return t=t.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(t,e,n,r){return t="?"===r?r:null,r="*"===r?r:null,i.push({name:n,optional:!!t}),e=e||"",""+(t?"":e)+"(?:"+(t?e:"")+(r&&"(.+?)"||"([^/]+)")+(t||"")+")"+(t||"")}).replace(/([\/$\*])/g,"\\$1"),r.regexp=new RegExp("^"+t+"$",n?"i":""),r}var r={};this.when=function(t,i){var a=e.copy(i);if(e.isUndefined(a.reloadOnSearch)&&(a.reloadOnSearch=!0),e.isUndefined(a.caseInsensitiveMatch)&&(a.caseInsensitiveMatch=this.caseInsensitiveMatch),r[t]=e.extend(a,t&&n(t,a)),t){var c="/"==t[t.length-1]?t.substr(0,t.length-1):t+"/";r[c]=e.extend({redirectTo:t},n(c,a))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(t){return"string"==typeof t&&(t={redirectTo:t}),this.when(null,t),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(n,i,c,o,s,u,l){function p(t){var r=v.current;(k=(m=f())&&r&&m.$$route===r.$$route&&e.equals(m.pathParams,r.pathParams)&&!m.reloadOnSearch&&!g)||!r&&!m||n.$broadcast("$routeChangeStart",m,r).defaultPrevented&&t&&t.preventDefault()}function d(){var t=v.current,r=m;k?(t.params=r.params,e.copy(t.params,c),n.$broadcast("$routeUpdate",t)):(r||t)&&(g=!1,(v.current=r)&&r.redirectTo&&(e.isString(r.redirectTo)?i.path(h(r.redirectTo,r.params)).search(r.params).replace():i.url(r.redirectTo(r.pathParams,i.path(),i.search())).replace()),o.when(r).then(function(){if(r){var t,n,i=e.extend({},r.resolve);return e.forEach(i,function(t,n){i[n]=e.isString(t)?s.get(t):s.invoke(t,null,null,n)}),e.isDefined(t=r.template)?e.isFunction(t)&&(t=t(r.params)):e.isDefined(n=r.templateUrl)&&(e.isFunction(n)&&(n=n(r.params)),n=l.getTrustedResourceUrl(n),e.isDefined(n)&&(r.loadedTemplateUrl=n,t=u(n))),e.isDefined(t)&&(i.$template=t),o.all(i)}}).then(function(i){r==v.current&&(r&&(r.locals=i,e.copy(r.params,c)),n.$broadcast("$routeChangeSuccess",r,t))},function(e){r==v.current&&n.$broadcast("$routeChangeError",r,t,e)}))}function f(){var n,a;return e.forEach(r,function(r,c){var o;if(o=!a){var s=i.path();o=r.keys;var u={};if(r.regexp)if(s=r.regexp.exec(s)){for(var l=1,p=s.length;p>l;++l){var d=o[l-1],f=s[l];d&&f&&(u[d.name]=f)}o=u}else o=null;else o=null;o=n=o}o&&(a=t(r,{params:e.extend({},i.search(),n),pathParams:n}),a.$$route=r)}),a||r[null]&&t(r[null],{params:{},pathParams:{}})}function h(t,n){var r=[];return e.forEach((t||"").split(":"),function(t,e){if(0===e)r.push(t);else{var i=t.match(/(\w+)(?:[?*])?(.*)/),a=i[1];r.push(n[a]),r.push(i[2]||""),delete n[a]}}),r.join("")}var m,k,g=!1,v={routes:r,reload:function(){g=!0,n.$evalAsync(function(){p(),d()})},updateParams:function(t){if(!this.current||!this.current.$$route)throw a("norout");var n={},r=this;e.forEach(Object.keys(t),function(e){r.current.pathParams[e]||(n[e]=t[e])}),t=e.extend({},this.current.params,t),i.path(h(this.current.$$route.originalPath,t)),i.search(e.extend({},i.search(),n))}};return n.$on("$locationChangeStart",p),n.$on("$locationChangeSuccess",d),v}]});var a=e.$$minErr("ngRoute");t.provider("$routeParams",function(){this.$get=function(){return{}}}),t.directive("ngView",r),t.directive("ngView",i),r.$inject=["$route","$anchorScroll","$animate"],i.$inject=["$compile","$controller","$route"]}(window,window.angular),appStickerPipeStore.config(function(t){t.setAccount({tracker:"UA-1113296-81",name:"stickerTracker"})}),function(t){try{t=angular.module("partials")}catch(e){t=angular.module("partials",[])}t.run(["$templateCache",function(t){t.put("/modules/store/StoreView.tpl","<div>StoreView</div>")}])}(),function(t){try{t=angular.module("partials")}catch(e){t=angular.module("partials",[])}t.run(["$templateCache",function(t){t.put("/modules/pack/PackView.tpl",'<div class="pack-screen {{ packController.hasTappedSticker() ? \'hasTappedSticker\' : \'\' }}"\n	 ng-click="packController.resetTappedSticker()">\n\n	<div class="pack-header">\n		<div data-pack-header pack="packController.pack" sticker-url="packController.getStickerUrl"></div>\n	</div>\n\n	<div class="container pack-content">\n		<div class="row">\n			<div class="col-xs-12">\n				<p>{{ packController.pack.description || \'\' }}</p>\n			</div>\n		</div>\n	</div>\n\n	<div class="container pack-stickers">\n		<div class="row">\n			<div class="col-xs-4" ng-repeat="sticker in packController.pack.stickers">\n				<div class="sticker {{ packController.isTappedSticker(sticker) ? \'tapped\' : \'\' }}"\n				     ng-click="packController.tapSticker(sticker); $event.stopPropagation();">\n\n					<img ng-src="{{ packController.getStickerUrl(sticker.name) }}"\n					     alt="{{ sticker.name }}"\n					     class="img-responsive"/>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>')}])}(),function(t){try{t=angular.module("partials")}catch(e){t=angular.module("partials",[])}t.run(["$templateCache",function(t){t.put("/modules/pack/header/HeaderView.tpl",'<div class="bg-white"></div>\n\n<div data-pack-banner ng-if="!!getPackBanner()" class="pack-banner">\n	<img ng-src="{{ getPackBanner() }}" alt="">\n	<div class="gradient"></div>\n</div>\n\n<div class="container pack-info">\n	<div class="row">\n		<div class="col-xs-6">\n			<img src="{{ getMainStickerUrl() }}"\n			     alt="{{ pack.title }}"\n			     class="pack-main-sticker img-responsive">\n		</div>\n		<div class="col-xs-6">\n			<div class="pack-main-info">\n				<h2>{{ pack.artist }}</h2>\n				<h1>{{ pack.title }}</h1>\n\n				<div pack-action-button pack="pack"></div>\n			</div>\n		</div>\n	</div>\n</div>')}])}(),function(t){try{t=angular.module("partials")}catch(e){t=angular.module("partials",[])}t.run(["$templateCache",function(t){t.put("/modules/pack/actionButton/ActionButtonView.tpl",'<a href="javascript: void(0);" ng-click="buttonOnClick(pack); $event.stopPropagation();">{{ buttonText }}</a>')}])}(),appStickerPipeStore.config(function(t){t.when("/",{controller:"StoreController as storeController",templateUrl:"/modules/store/StoreView.tpl"}).when("/packs/:packName",{controller:"PackController as packController",templateUrl:"/modules/pack/PackView.tpl",resolve:{pack:function(t,e){return e.getPack(t.current.params.packName)}}}).otherwise({redirectTo:"/"})}),appStickerPipeStore.factory("AndroidPlatform",["BasePlatform","HttpApi",function(t,e){var n=window.AndroidJsInterface||{};return angular.extend(t,{showPackCollections:function(){return n.showCollections()},downloadPack:function(t){e.changePackStatus(t,1).then(function(){n.onPackDownloaded(t)})},purchasePackInStore:function(t,e,r){return n.onPurchase(t,e,r)},purchasePackInPlatformStore:function(t){return n.onPurchase(t)},isPackActive:function(t){return n.isPackActive(t)},getProductPrice:function(t){return n.getProductPrice(t)},isPackExistsAtUserLibrary:function(t){return n.isPackExistsAtUserLibrary(t)}})}]),appStickerPipeStore.factory("BasePlatform",[function(){return angular.extend({},{showPackCollections:function(){console.log("showPackCollections")},downloadPack:function(t){console.log("downloadPack",t)},purchasePackInStore:function(t,e,n){console.log("purchasePackInStore",t,e,n)},purchasePackInPlatformStore:function(t){console.log("purchasePackInPlatformStore",t)},isPackActive:function(t){console.log("isPackActive",t)},getProductPrice:function(t){console.log("getProductPrice",t)},isPackExistsAtUserLibrary:function(t){console.log("isPackExistsAtUserLibrary",t)}})}]),appStickerPipeStore.controller("BaseController",function(t){this.stylesheets=[],this.getResolutionType=function(){return t.resolutionType}}),appStickerPipeStore.controller("PackController",function(t,e){var n=this;this.pack=t,this.tappedSticker=null,this.getPackBanner=function(){return t.banners&&t.banners[e.resolutionType]},this.getStickerUrl=function(n){return"http://api.stickerpipe.com/stk/"+t.pack_name+"/"+n+"_"+e.resolutionType+".png"},this.isTappedSticker=function(t){return this.tappedSticker==t},this.tapSticker=function(t){this.tappedSticker=t!=this.tappedSticker?t:null},this.resetTappedSticker=function(t){n.tapSticker(null)},this.hasTappedSticker=function(){return!n.isTappedSticker(null)}}),appStickerPipeStore.factory("PackModel",["HttpApi",function(t){var e=function(e){var n=this;"string"==typeof e?(this.data=this.data||{},this.data.pack_name=e):this.data=e,this.fetch=function(e){if(e=e||n.get("pack_name")||null,!e){var r=$q.defer();return r.reject(response),r.promise}return t.getPack(e)}};return angular.extend(e,{get:function(t){return this.data[t]}})}]),appStickerPipeStore.controller("StoreController",function(){}),appStickerPipeStore.directive("packActionButton",function(t){return{restrict:"AE",scope:{pack:"=pack"},templateUrl:"/modules/pack/actionButton/ActionButtonView.tpl",link:function(e,n,r){var i=e.pack;e.buttonText="Download",e.buttonOnClick=function(t){console.log("onclick",t)};t.isPackActive(i)?(e.buttonText="Open stickers",e.buttonOnClick=t.showPackCollections):t.isPackExistsAtUserLibrary(i)||void 0===i.product_id&&!i.price?(e.buttonText="Download",e.buttonOnClick=t.downloadPack):void 0===i.product_id||i.price?(e.buttonText="Buy pack "+i.price,e.buttonOnClick=t.purchasePackInStore):(e.buttonText="Buy pack",e.buttonOnClick=t.purchasePackInPlatformStore),e.$apply()}}}),appStickerPipeStore.directive("packHeader",function(t,e,n){var r={};return r.mdpi={width:360,height:168},r.hdpi={width:1.5*r.mdpi.width,height:1.5*r.mdpi.height},r.xhdpi={width:2*r.mdpi.width,height:2*r.mdpi.height},r.xxhdpi={width:3*r.mdpi.width,height:3*r.mdpi.height},{restrict:"AE",scope:{pack:"=pack",stickerUrl:"=stickerUrl"},templateUrl:"/modules/pack/header/HeaderView.tpl",link:function(i,a,c){var o=i.pack,s=r[t.resolutionType];i.getPackBanner=function(){return o.banners&&o.banners[t.resolutionType]},i.getMainStickerUrl=function(){return i.stickerUrl("main_icon")},i.onWindowResize=function(){var t=angular.element(a[0].getElementsByClassName("pack-banner")[0]),n=e.innerWidth/s.width*s.height;t.find("img").css({width:e.innerWidth+"px",height:n+"px"});var r=angular.element(a[0].getElementsByClassName("pack-info")[0]);t[0]&&(angular.element(t[0].getElementsByClassName("gradient")[0]).css({height:n+"px"}),r.css({marginTop:-(r.prop("offsetHeight")/2)+"px"}));var c=angular.element(r[0].getElementsByClassName("pack-main-sticker")[0]);c.bind("load",function(){i.onWindowResize()});var o=angular.element(r[0].getElementsByClassName("pack-main-info")[0]);o.css({marginTop:(r.prop("offsetHeight")-o.prop("offsetHeight"))/2+"px"})},angular.element(e).on("resize",function(){i.onWindowResize()}),n(function(){angular.element(e).triggerHandler("resize")})}}});